!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ballpen=e()}(this,function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),n=function(){function n(e,i){t(this,n),this.el=document.querySelector(e),this.dataModel=i,this.initOptions(i),this.scan(this.el),this.a={b:1,c:2,d:3},this.observer(this.a,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];console.log(e)})}return e(n,[{key:"initOptions",value:function(t){t.event&&(this.eventList={},this.initEventList(t.event)),t.data&&(this.dataList=t.data,this.modelList={})}},{key:"initEventList",value:function(t){if(t){var e=t;for(var n in e)this.eventList[n]={},this.eventList[n].type="",this.eventList[n].fn=e[n]}}},{key:"scan",value:function(t){for(var e=0;e<t.children.length;e++){var n=t.children[e];this.bind(n),n.children.length>0&&this.scan(n)}}},{key:"bind",value:function(t){if(t.hasAttributes())for(var e=t.attributes,n=0;n<e.length;n++){var i=e.item(n);if("bp-model"===i.name&&this.bindModel(t),"bp-class"===i.name&&this.bindClass(t),/bp-event:/gi.test(i.name)){var r=i.name.split(":")[1],a=i.value;this.bindEvent(t,a,r)}"bp-for"===i.name&&this.bindFor(t)}}},{key:"bindModel",value:function(t){var e=t.getAttribute("bp-model"),i=n.parseData(e,this.dataList);"INPUT"===t.tagName?t.value=i.data:t.innerText=i.data}},{key:"bindClass",value:function(t){var e=t.getAttribute("bp-class"),i=n.parseData(e,this.dataList);t.classList.contains(i.data)||t.classList.add(i.data)}},{key:"bindEvent",value:function(t,e,n){this.eventList[e].type=n,t.addEventListener(n,this.eventList[e].fn)}},{key:"bindFor",value:function(t){for(var e=t.getAttribute("bp-for"),i=n.parseData(e,this.dataList).data,r=document.createDocumentFragment(),a=0;a<i.length;a++){var o=t.cloneNode(!0);o.removeAttribute("bp-for"),o.getAttribute("bp-class")&&this.bindClass(o),o.getAttribute("bp-event")&&this.bindEvent(o);var s=e+"."+a;r.appendChild(this.bindForItems(o,s))}t.parentNode.appendChild(r),t.remove()}},{key:"bindForItems",value:function(t,e){for(var n=0;n<t.children.length;n++){var i=t.children[n];if(i.getAttribute("bp-class")&&this.bindClass(i),i.getAttribute("bp-event")&&this.bindEvent(i),i.getAttribute("bp-for-item")){var r=i.getAttribute("bp-for-item"),a=e+("."+r);i.setAttribute("bp-model",a),i.removeAttribute("bp-for-item")}i.getAttribute("bp-model")&&this.bindModel(i),i.children.length>0&&this.bindForItems(i)}return t}},{key:"observer",value:function(t,e){var n=this;Object.keys(t).forEach(function(i){n.oberveKey(t,i,e)})}},{key:"oberveKey",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t[e];"[object Object]"===Object.prototype.toString.call(r)?this.observeAllKey(t,i):"[object Array]"===Object.prototype.toString.call(r)?this.observeArray(t,i):Object.defineProperty(t,e,{get:function(){return r},set:function(t){t!==r&&i&&i.call(n,r,t),r=t},enumerable:!0,configurable:!0})}},{key:"observeAllKey",value:function(t,e){var n=this;Object.keys(t).forEach(function(i){n.oberveKey(t,i,e)})}},{key:"observeArray",value:function(t,e){var n=this,i=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"],r=Array.prototype,a=Object.create(r);i.forEach(function(i){Object.defineProperty(a,i,{enumerable:!0,configurable:!0,writable:!0,value:function(){for(var a,o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];var u=t.slice(),c=(a=r[i]).call.apply(a,[t].concat(s));return e&&e.call(n,u,c),c}})}),t.__proto__=a,t.__proto__.__proto__===Array.prototype,t.forEach(function(i,r){n.observeArrayItem(t,r,e)})}},{key:"observeArrayItem",value:function(t,e,n){var i=this,r=t[e];Object.defineProperty(t,e,{get:function(){return r},set:function(t){t!==r&&n&&n.call(i,r,t),r=t},enumerable:!0,configurable:!0})}}],[{key:"parseData",value:function(t,e){var n=t.split("."),i=void 0,r=[];return n.forEach(function(t,n){0===n?(i=e[t],r.push(t)):(i=i[t],r.push(t))}),{path:r,data:i}}}]),n}();return n});
//# sourceMappingURL=ballpen.min.js.map
