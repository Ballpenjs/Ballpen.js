!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Ballpen=t()}(this,function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function t(){e(this,t)}return o(t,null,[{key:"findReferenceNode",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=r;if(t.isObject(e))for(var o in e)(t.isObject(e[o])||t.isArray(e[o]))&&(i+=o+".",n.set(i.slice(0,-1),[]),t.findReferenceNode(e[o],n,i));else t.isArray(e)&&e.forEach(function(e,r){(t.isObject(e)||t.isArray(e))&&(i+=r+".",n.set(i.slice(0,-1),[]),t.findReferenceNode(e,n,i))});return n}},{key:"isHTMLCollection",value:function(e){return"[object HTMLCollection]"===Object.prototype.toString.call(e)}},{key:"isArray",value:function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)}},{key:"toArray",value:function(e){return Array.prototype.slice.call(e)}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isReferenceType",value:function(e){return t.isObject(e)||t.isArray(e)}},{key:"renderObjectValueByPath",value:function(e,n,r){var i=n.split(".");if("undefined"==typeof t.parseData(n,e).data&&t.throwError('Find an invalid watcher path when initializing Ballpen.js -> "'+n+'"',"Please make sure the watcher path you set is exist and valid."),1===i.length)e[i[0]]=r;else for(var o=0;o<i.length-1;o++)e=e[i[o]],e||t.throwError('Find an invalid watcher path when initializing Ballpen.js -> "'+n+'"',"Please make sure the watcher path you set is exist and valid."),o===i.length-2&&(e[i[i.length-1]]=r)}},{key:"parseData",value:function(e,t){var n=e.split("."),r=t,i=[];return n.forEach(function(e,n){0===n?(r=t[e],i.push(e)):(r=r[e],i.push(e))}),{path:i,data:r}}},{key:"ignoreInnerDirectives",value:function(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=this;t.forEach(function(t){t.test(e)&&n&&n.call.apply(n,[a].concat(i))}),/^@/gi.test(e)||n&&n.call.apply(n,[this].concat(i))}},{key:"clone",value:function(e){var n=void 0;if(null===e||"object"!==("undefined"==typeof e?"undefined":i(e)))return e;if(e instanceof Date)return n=new Date,n.setTime(e.getTime()),n;if(e instanceof Array){n=[];for(var r=0,o=e.length;r<o;r++)n[r]=t.clone(e[r]);return n}if(e instanceof Object){n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=t.clone(e[a]));return n}t.throwError("Internal error, unable to copy object, type is not supported.","Please contact the author to fix this issue.")}},{key:"wrapAbsPath",value:function(e,n){return(t.isArray(e)&&e.length>0?e.join(".")+".":e.toString().length>0?e.toString()+".":"")+(t.isArray(n)&&n.length>0?n.join("."):n.toString().length>0?n.toString():"")}},{key:"throwError",value:function(e,t){var n=new Error("[Ballpen Parser Error] \n\n [Message] \n\n - "+e+" \n\n [Description] \n\n - "+t+" \n");throw n.name="BallpenError",n}},{key:"randomSequence",value:function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",r=0;r<e;r++){var i=Math.ceil(35*Math.random());n+=t[i]}return n}}]),t}(),u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=t(function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r,i){"object"==n(t)&&"object"==n(e)?e.exports=i():"object"==n(t)?t.axios=i():r.axios=i()}(u,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(2),o=n(3),a=n(4),u=n(5),s=r(u);s.Axios=a,s.create=function(e){return r(i.merge(u,e))},s.Cancel=n(22),s.CancelToken=n(23),s.isCancel=n(19),s.all=function(e){return Promise.all(e)},s.spread=n(24),e.exports=s,e.exports.default=s},function(e,t,r){function i(e){return"[object Array]"===E.call(e)}function o(e){return"[object ArrayBuffer]"===E.call(e)}function a(e){return"undefined"!=typeof FormData&&e instanceof FormData}function u(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function c(e){return"number"==typeof e}function f(e){return"undefined"==typeof e}function l(e){return null!==e&&"object"==("undefined"==typeof e?"undefined":n(e))}function p(e){return"[object Date]"===E.call(e)}function d(e){return"[object File]"===E.call(e)}function h(e){return"[object Blob]"===E.call(e)}function v(e){return"[object Function]"===E.call(e)}function y(e){return l(e)&&v(e.pipe)}function b(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function m(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function w(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==("undefined"==typeof e?"undefined":n(e))||i(e)||(e=[e]),i(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function A(){function e(e,r){"object"==n(t[r])&&"object"==("undefined"==typeof e?"undefined":n(e))?t[r]=A(t[r],e):t[r]=e}for(var t={},r=0,i=arguments.length;r<i;r++)w(arguments[r],e);return t}function x(e,t,n){return w(t,function(t,r){n&&"function"==typeof t?e[r]=j(t,n):e[r]=t}),e}var j=r(3),E=Object.prototype.toString;e.exports={isArray:i,isArrayBuffer:o,isFormData:a,isArrayBufferView:u,isString:s,isNumber:c,isObject:l,isUndefined:f,isDate:p,isFile:d,isBlob:h,isFunction:v,isStream:y,isURLSearchParams:b,isStandardBrowserEnv:g,forEach:w,merge:A,extend:x,trim:m}},function(e,t){e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(5),o=n(2),a=n(16),u=n(17),s=n(20),c=n(21);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!s(e.url)&&(e.url=c(e.baseURL,e.url));var t=[u,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){function r(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function i(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(7):"undefined"!=typeof process&&(e=n(7)),e}var o=n(2),a=n(6),u=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"},c={adapter:i(),transformRequest:[function(e,t){return a(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(u,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){c.headers[e]={}}),o.forEach(["post","put","patch"],function(e){c.headers[e]=o.merge(s)}),e.exports=c},function(e,t,n){var r=n(2);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){var r=n(2),i=n(8),o=n(11),a=n(12),u=n(13),s=n(9),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(14);e.exports=function(e){return new Promise(function(t,f){var l=e.data,p=e.headers;r.isFormData(l)&&delete p["Content-Type"];var d=new XMLHttpRequest,h="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||u(e.url)||(d=new window.XDomainRequest,h="onload",v=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var y=e.auth.username||"",b=e.auth.password||"";p.Authorization="Basic "+c(y+":"+b)}if(d.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[h]=function(){if(d&&(4===d.readyState||v)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?d.response:d.responseText,o={data:r,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:e,request:d};i(t,f,o),d=null}},d.onerror=function(){f(s("Network Error",e)),d=null},d.ontimeout=function(){f(s("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),d=null},r.isStandardBrowserEnv()){var m=n(15),g=(e.withCredentials||u(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;g&&(p[e.xsrfHeaderName]=g)}if("setRequestHeader"in d&&r.forEach(p,function(e,t){"undefined"==typeof l&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(e){if("json"!==d.responseType)throw e}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),f(e),d=null)}),void 0===l&&(l=null),d.send(l)})}},function(e,t,n){var r=n(9);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){var o=new Error(e);return r(o,t,n,i)}},function(e,t){e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(2);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(e.indexOf("?")===-1?"?":"&")+o),e}},function(e,t,n){var r=n(2);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t,n){var r=n(2);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t){function n(){this.message="String contains an invalid character"}function r(e){for(var t,r,o=String(e),a="",u=0,s=i;o.charAt(0|u)||(s="=",u%1);a+=s.charAt(63&t>>8-u%1*8)){if(r=o.charCodeAt(u+=.75),r>255)throw new n;t=t<<8|r}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=r},function(e,t,n){var r=n(2);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(i)&&u.push("path="+i),r.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){function r(){this.handlers=[]}var i=n(2);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(2),o=n(18),a=n(19),u=n(5);e.exports=function(e){r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||u.adapter;return t(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){var r=n(2);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,n){function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=n(22);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e,t=new r(function(t){e=t});return{token:t,cancel:e}},e.exports=r},function(e,t){e.exports=function(e){return function(t){return e.apply(null,t)}}}])})}),c=t(function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){function r(e){function t(t,n,r,i,o,a){for(;o>=0&&o<a;o+=e){var u=i?i[o]:o;r=n(r,t[u],u,t)}return r}return function(n,r,i,o){r=x(r,o,4);var a=!$(n)&&A.keys(n),u=(a||n).length,s=e>0?0:u-1;return arguments.length<3&&(i=n[a?a[s]:s],s+=e),t(n,r,i,a,s,u)}}function i(e){return function(t,n,r){n=j(n,r);for(var i=P(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function o(e,t,n){return function(r,i,o){var a=0,u=P(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(d.call(r,a,u),A.isNaN),o>=0?o+a:-1;for(o=e>0?a:u-1;o>=0&&o<u;o+=e)if(r[o]===i)return o;return-1}}function a(e,t){var n=N.length,r=e.constructor,i=A.isFunction(r)&&r.prototype||f,o="constructor";for(A.has(e,o)&&!A.contains(t,o)&&t.push(o);n--;)o=N[n],o in e&&e[o]!==i[o]&&!A.contains(t,o)&&t.push(o)}var u=this,s=u._,c=Array.prototype,f=Object.prototype,l=Function.prototype,p=c.push,d=c.slice,h=f.toString,v=f.hasOwnProperty,y=Array.isArray,b=Object.keys,m=l.bind,g=Object.create,w=function(){},A=function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};e.exports&&(t=e.exports=A),t._=A,A.VERSION="1.8.3";var x=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},j=function(e,t,n){return null==e?A.identity:A.isFunction(e)?x(e,t,n):A.isObject(e)?A.matcher(e):A.property(e)};A.iteratee=function(e,t){return j(e,t,1/0)};var E=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),u=a.length,s=0;s<u;s++){var c=a[s];t&&void 0!==n[c]||(n[c]=o[c])}return n}},k=function(e){if(!A.isObject(e))return{};if(g)return g(e);w.prototype=e;var t=new w;return w.prototype=null,t},S=function(e){return function(t){return null==t?void 0:t[e]}},_=Math.pow(2,53)-1,P=S("length"),$=function(e){var t=P(e);return"number"==typeof t&&t>=0&&t<=_};A.each=A.forEach=function(e,t,n){t=x(t,n);var r,i;if($(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=A.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},A.map=A.collect=function(e,t,n){t=j(t,n);for(var r=!$(e)&&A.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var u=r?r[a]:a;o[a]=t(e[u],u,e)}return o},A.reduce=A.foldl=A.inject=r(1),A.reduceRight=A.foldr=r(-1),A.find=A.detect=function(e,t,n){var r;if(r=$(e)?A.findIndex(e,t,n):A.findKey(e,t,n),void 0!==r&&r!==-1)return e[r]},A.filter=A.select=function(e,t,n){var r=[];return t=j(t,n),A.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},A.reject=function(e,t,n){return A.filter(e,A.negate(j(t)),n)},A.every=A.all=function(e,t,n){t=j(t,n);for(var r=!$(e)&&A.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},A.some=A.any=function(e,t,n){t=j(t,n);for(var r=!$(e)&&A.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},A.contains=A.includes=A.include=function(e,t,n,r){return $(e)||(e=A.values(e)),("number"!=typeof n||r)&&(n=0),A.indexOf(e,t,n)>=0},A.invoke=function(e,t){var n=d.call(arguments,2),r=A.isFunction(t);return A.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},A.pluck=function(e,t){return A.map(e,A.property(t))},A.where=function(e,t){return A.filter(e,A.matcher(t))},A.findWhere=function(e,t){return A.find(e,A.matcher(t))},A.max=function(e,t,n){var r,i,o=-(1/0),a=-(1/0);if(null==t&&null!=e){e=$(e)?e:A.values(e);for(var u=0,s=e.length;u<s;u++)r=e[u],r>o&&(o=r)}else t=j(t,n),A.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=e,a=i)});return o},A.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e){e=$(e)?e:A.values(e);for(var u=0,s=e.length;u<s;u++)r=e[u],r<o&&(o=r)}else t=j(t,n),A.each(e,function(e,n,r){i=t(e,n,r),(i<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},A.shuffle=function(e){for(var t,n=$(e)?e:A.values(e),r=n.length,i=Array(r),o=0;o<r;o++)t=A.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},A.sample=function(e,t,n){return null==t||n?($(e)||(e=A.values(e)),e[A.random(e.length-1)]):A.shuffle(e).slice(0,Math.max(0,t))},A.sortBy=function(e,t,n){return t=j(t,n),A.pluck(A.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var O=function(e){return function(t,n,r){var i={};return n=j(n,r),A.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};A.groupBy=O(function(e,t,n){A.has(e,n)?e[n].push(t):e[n]=[t]}),A.indexBy=O(function(e,t,n){e[n]=t}),A.countBy=O(function(e,t,n){A.has(e,n)?e[n]++:e[n]=1}),A.toArray=function(e){return e?A.isArray(e)?d.call(e):$(e)?A.map(e,A.identity):A.values(e):[]},A.size=function(e){return null==e?0:$(e)?e.length:A.keys(e).length},A.partition=function(e,t,n){t=j(t,n);var r=[],i=[];return A.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},A.first=A.head=A.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:A.initial(e,e.length-t)},A.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},A.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:A.rest(e,Math.max(0,e.length-t))},A.rest=A.tail=A.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},A.compact=function(e){return A.filter(e,A.identity)};var L=function e(t,n,r,i){for(var o=[],a=0,u=i||0,s=P(t);u<s;u++){var c=t[u];if($(c)&&(A.isArray(c)||A.isArguments(c))){n||(c=e(c,n,r));var f=0,l=c.length;for(o.length+=l;f<l;)o[a++]=c[f++]}else r||(o[a++]=c)}return o};A.flatten=function(e,t){return L(e,t,!1)},A.without=function(e){return A.difference(e,d.call(arguments,1))},A.uniq=A.unique=function(e,t,n,r){A.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=j(n,r));for(var i=[],o=[],a=0,u=P(e);a<u;a++){var s=e[a],c=n?n(s,a,e):s;t?(a&&o===c||i.push(s),o=c):n?A.contains(o,c)||(o.push(c),i.push(s)):A.contains(i,s)||i.push(s)}return i},A.union=function(){return A.uniq(L(arguments,!0,!0))},A.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=P(e);r<i;r++){var o=e[r];if(!A.contains(t,o)){for(var a=1;a<n&&A.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},A.difference=function(e){var t=L(arguments,!0,!0,1);return A.filter(e,function(e){return!A.contains(t,e)})},A.zip=function(){return A.unzip(arguments)},A.unzip=function(e){for(var t=e&&A.max(e,P).length||0,n=Array(t),r=0;r<t;r++)n[r]=A.pluck(e,r);return n},A.object=function(e,t){for(var n={},r=0,i=P(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},A.findIndex=i(1),A.findLastIndex=i(-1),A.sortedIndex=function(e,t,n,r){n=j(n,r,1);for(var i=n(t),o=0,a=P(e);o<a;){var u=Math.floor((o+a)/2);n(e[u])<i?o=u+1:a=u}return o},A.indexOf=o(1,A.findIndex,A.sortedIndex),A.lastIndexOf=o(-1,A.findLastIndex),A.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var R=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=k(e.prototype),a=e.apply(o,i);return A.isObject(a)?a:o};A.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,d.call(arguments,1));if(!A.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function r(){return R(e,r,t,this,n.concat(d.call(arguments)))};return r},A.partial=function(e){var t=d.call(arguments,1),n=function n(){for(var r=0,i=t.length,o=Array(i),a=0;a<i;a++)o[a]=t[a]===A?arguments[r++]:t[a];for(;r<arguments.length;)o.push(arguments[r++]);return R(e,n,this,this,o)};return n},A.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=A.bind(e[n],e);return e},A.memoize=function(e,t){var n=function n(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return A.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},A.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},A.defer=A.partial(A.delay,A,1),A.throttle=function(e,t,n){var r,i,o,a=null,u=0;n||(n={});var s=function(){u=n.leading===!1?0:A.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var c=A.now();u||n.leading!==!1||(u=c);var f=t-(c-u);return r=this,i=arguments,f<=0||f>t?(a&&(clearTimeout(a),a=null),u=c,o=e.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(s,f)),o}},A.debounce=function(e,t,n){var r,i,o,a,u,s=function s(){var c=A.now()-a;c<t&&c>=0?r=setTimeout(s,t-c):(r=null,n||(u=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=A.now();var c=n&&!r;return r||(r=setTimeout(s,t)),c&&(u=e.apply(o,i),o=i=null),u}},A.wrap=function(e,t){return A.partial(t,e)},A.negate=function(e){return function(){return!e.apply(this,arguments)}},A.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},A.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},A.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},A.once=A.partial(A.before,2);var T=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];A.keys=function(e){if(!A.isObject(e))return[];if(b)return b(e);var t=[];for(var n in e)A.has(e,n)&&t.push(n);return T&&a(e,t),t},A.allKeys=function(e){if(!A.isObject(e))return[];var t=[];for(var n in e)t.push(n);return T&&a(e,t),t},A.values=function(e){for(var t=A.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},A.mapObject=function(e,t,n){t=j(t,n);for(var r,i=A.keys(e),o=i.length,a={},u=0;u<o;u++)r=i[u],a[r]=t(e[r],r,e);return a},A.pairs=function(e){for(var t=A.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},A.invert=function(e){for(var t={},n=A.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},A.functions=A.methods=function(e){var t=[];for(var n in e)A.isFunction(e[n])&&t.push(n);return t.sort()},A.extend=E(A.allKeys),A.extendOwn=A.assign=E(A.keys),A.findKey=function(e,t,n){t=j(t,n);for(var r,i=A.keys(e),o=0,a=i.length;o<a;o++)if(r=i[o],t(e[r],r,e))return r},A.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;A.isFunction(t)?(i=A.allKeys(a),r=x(t,n)):(i=L(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var u=0,s=i.length;u<s;u++){var c=i[u],f=a[c];r(f,c,a)&&(o[c]=f)}return o},A.omit=function(e,t,n){if(A.isFunction(t))t=A.negate(t);else{var r=A.map(L(arguments,!1,!1,1),String);t=function(e,t){return!A.contains(r,t)}}return A.pick(e,t,n)},A.defaults=E(A.allKeys,!0),A.create=function(e,t){var n=k(e);return t&&A.extendOwn(n,t),n},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e},A.tap=function(e,t){return t(e),e},A.isMatch=function(e,t){var n=A.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var C=function e(t,r,i,o){if(t===r)return 0!==t||1/t===1/r;if(null==t||null==r)return t===r;t instanceof A&&(t=t._wrapped),r instanceof A&&(r=r._wrapped);var a=h.call(t);if(a!==h.call(r))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!==+t?+r!==+r:0===+t?1/+t===1/r:+t===+r;case"[object Date]":case"[object Boolean]":return+t===+r}var u="[object Array]"===a;if(!u){if("object"!=("undefined"==typeof t?"undefined":n(t))||"object"!=("undefined"==typeof r?"undefined":n(r)))return!1;var s=t.constructor,c=r.constructor;if(s!==c&&!(A.isFunction(s)&&s instanceof s&&A.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in r)return!1}i=i||[],o=o||[];for(var f=i.length;f--;)if(i[f]===t)return o[f]===r;if(i.push(t),o.push(r),u){if(f=t.length,f!==r.length)return!1;for(;f--;)if(!e(t[f],r[f],i,o))return!1}else{var l,p=A.keys(t);if(f=p.length,A.keys(r).length!==f)return!1;for(;f--;)if(l=p[f],!A.has(r,l)||!e(t[l],r[l],i,o))return!1}return i.pop(),o.pop(),!0};A.isEqual=function(e,t){return C(e,t)},A.isEmpty=function(e){return null==e||($(e)&&(A.isArray(e)||A.isString(e)||A.isArguments(e))?0===e.length:0===A.keys(e).length)},A.isElement=function(e){return!(!e||1!==e.nodeType)},A.isArray=y||function(e){return"[object Array]"===h.call(e)},A.isObject=function(e){var t="undefined"==typeof e?"undefined":n(e);return"function"===t||"object"===t&&!!e},A.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){A["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),A.isArguments(arguments)||(A.isArguments=function(e){return A.has(e,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":n(Int8Array))&&(A.isFunction=function(e){return"function"==typeof e||!1}),A.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},A.isNaN=function(e){return A.isNumber(e)&&e!==+e},A.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e},A.has=function(e,t){return null!=e&&v.call(e,t)},A.noConflict=function(){return u._=s,this},A.identity=function(e){return e},A.constant=function(e){return function(){return e}},A.noop=function(){},A.property=S,A.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},A.matcher=A.matches=function(e){return e=A.extendOwn({},e),function(t){return A.isMatch(t,e)}},A.times=function(e,t,n){var r=Array(Math.max(0,e));t=x(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},A.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},A.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=A.invert(B),F=function(e){var t=function(t){return e[t]},n="(?:"+A.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};A.escape=F(B),A.unescape=F(D),A.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),A.isFunction(r)?r.call(e):r};var M=0;A.uniqueId=function(e){var t=++M+"";return e?e+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,U=function(e){return"\\"+q[e]};A.template=function(e,t,n){!t&&n&&(t=n),t=A.defaults({},t,A.templateSettings);var r=RegExp([(t.escape||I).source,(t.interpolate||I).source,(t.evaluate||I).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,u){return o+=e.slice(i,u).replace(z,U),i=u+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var u=function(e){return a.call(this,e,A)},s=t.variable||"obj";return u.source="function("+s+"){\n"+o+"}",u},A.chain=function(e){var t=A(e);return t._chain=!0,t};var V=function(e,t){return e._chain?A(t).chain():t};A.mixin=function(e){A.each(A.functions(e),function(t){var n=A[t]=e[t];A.prototype[t]=function(){var e=[this._wrapped];return p.apply(e,arguments),V(this,n.apply(A,e))}})},A.mixin(A),A.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){
var t=c[e];A.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],V(this,n)}}),A.each(["concat","join","slice"],function(e){var t=c[e];A.prototype[e]=function(){return V(this,t.apply(this._wrapped,arguments))}}),A.prototype.value=function(){return this._wrapped},A.prototype.valueOf=A.prototype.toJSON=A.prototype.value,A.prototype.toString=function(){return""+this._wrapped}}).call(u)}),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){function e(){n(this,e)}return f(e,null,[{key:"set",value:function(t){t.registerPlugin=e.registerPlugin,t.$http=s,t.$util=c,t.$refs={}}},{key:"registerPlugin",value:function(e,t){Ballpen["$"+e]=t}}]),e}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(){function e(t,n){var i=this;r(this,e),this.$dataModel=n,l.set(e),this.lifecycleHookPoint("beforeRender",this.$dataModel,function(){i.init(t,i.$dataModel),i.scan(i.$el)})}return p(e,[{key:"lifecycleHookPoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.data;"beforeRender"===e&&t.lifecycle&&t.lifecycle.beforeRender?new Promise(function(e,r){return t.lifecycle.beforeRender.call(n,e,r,i)}).then(function(){r&&r.call(n,t)}).catch(function(e){}):"afterRender"===e&&t.lifecycle&&t.lifecycle.afterRender?t.lifecycle.afterRender.call(this,i):r&&r.call(this,t)}},{key:"init",value:function(e,t){var n=this;if(this.$el=document.querySelector(e),this.$el||a.throwError('Find an invalid root element when initializing Ballpen.js -> "'+e+'"','Well, you should set a valid root element for Ballpen.js first constructor parameter, eg: "#app", "#container".'),t.events&&(this.$eventList={},this.initEventList(t.events)),t.data&&(this.$dataListPure=t.data,this.data=this.$dataListPure,this.$dataList=a.clone(t.data)),t.watchers){this.watchersHook=a.findReferenceNode(this.$dataList);var r=t.watchers,i=function(e){var t={root:e,handler:r[e].handler};n.watchersHook.forEach(function(n,r){new RegExp("^"+e,"ig").test(r)&&n.push(t)})};for(var o in r)i(o);this.watchersHook.forEach(function(e,t){a.renderObjectValueByPath(n.$dataList,t,n.setProxy(t,e))})}this.$registers=[]}},{key:"setProxy",value:function(e,t){var n=this,r=a.parseData(e,this.$dataList).data,i=a.parseData(e,this.$dataListPure).data,o={get:function(e,n){return t.forEach(function(e){e.handler,e.root}),e[n]},set:function(r,o,u,s){if(u!==i[o]){var c=void 0;a.isReferenceType(u)?(i[o]=a.clone(u),c=a.clone(u)):(i[o]=u,c=u),a.renderObjectValueByPath(n.$dataListPure,e+"."+o,c),r[o]=u,t.forEach(function(e){var t=e.handler,r=e.root;t&&t.call(n,a.parseData(r,n.$dataListPure).data,a.parseData(r,n.$dataList).data)})}return!0},defineProperty:function(e,t,n){return Reflect.defineProperty(e,t,n)}};return new Proxy(r,o)}},{key:"initEventList",value:function(e){if(e){var t=e;for(var n in t)this.$eventList[n]={},this.$eventList[n].type="",this.$eventList[n].fn=t[n]}}},{key:"scan",value:function(e){for(var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=function(n){var r=e.children[n];if(r.hasAttributes()){for(var i=r.attributes,o=[],a=0;a<i.length;a++){var u=i.item(a);o.push(u.name),/bp-event/gi.test(u.name)&&!function(){r.removeAttribute(u.name);var e=[],n=u;if(/bp-event:/gi.test(n.name))e.push({_fnType:n.name.split(":")[1],_fnName:n.value});else{var i=n.value.match(/[a-zA-Z]+:[a-zA-Z0-9_$]+/gi);i.forEach(function(t){e.push({_fnType:t.split(":")[0],_fnName:t.split(":")[1]})})}e.forEach(function(e){var n=e._fnType,i=e._fnName;t.bindEvent(r,i,n,t.$dataList,{})})}(),/bp-bind/gi.test(u.name)&&!function(){r.removeAttribute(u.name);var e=[],n=u;if(/bp-bind:/gi.test(n.name))e.push({_bindKey:n.name.split(":")[1],_thisSubModelAbs:n.value});else{var i=n.value.match(/[a-zA-Z0-9_$-]+:[a-zA-Z0-9_$.]+/gi);i.forEach(function(t){e.push({_bindKey:t.split(":")[0],_thisSubModelAbs:t.split(":")[1]})})}e.forEach(function(e){var n=e._bindKey,i=e._thisSubModelAbs;t.bindBind(r,i,n)})}()}if(o.includes("bp-pre"))return t.bindPre(r),"continue";if(o.includes("bp-for"))return t.bindFor(r),"continue";o.includes("bp-model")&&t.bindModel(r),o.includes("bp-class")&&t.bindClass(r),o.includes("bp-show")&&t.bindShow(r),o.includes("bp-ref")&&t.bindRef(r)}var s=r.childNodes;s.forEach(function(e,n){e.nodeType===Node.TEXT_NODE&&t.bindMoustache(r,e)}),r.children.length>0&&t.scan(r,!1)},i=0;i<e.children.length;i++){r(i)}n&&(this.attach(),this.$el.removeAttribute("bp-shade"),this.lifecycleHookPoint("afterRender",this.$dataModel))}},{key:"bindRef",value:function(t){var n=t.getAttribute("bp-ref");a.isArray(e.$refs[n])?e.$refs[n].push(t):(e.$refs[n]=[],e.$refs[n].push(t)),t.removeAttribute("bp-ref")}},{key:"bindShow",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=a.wrapAbsPath(n,e.getAttribute("bp-show"));a.ignoreInnerDirectives(r,[],function(e){var n=a.parseData(r,t.$dataList),i=e.style;n.data?i.removeProperty?i.removeProperty("display"):i.removeAttribute("display"):i.display="none",t.register(t.$dataList,t.$dataListPure,n.path,function(e,t){t?i.removeProperty?i.removeProperty("display"):i.removeAttribute("display"):i.display="none"})},e),e.removeAttribute("bp-show")}},{key:"bindModel",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=a.wrapAbsPath(n,e.getAttribute("bp-model"));a.ignoreInnerDirectives(r,[/^@{([\d]+)}$/gi],function(e){if(/^@{([\d]+)}$/gi.test(r)){var n=r.match(/^@{([\d]+)}$/)[1];"INPUT"===e.tagName?e.value=n:e.innerText=n}else{var i=a.parseData(r,t.$dataList);"INPUT"===e.tagName?e.value=i.data:e.innerText=i.data,t.register(t.$dataList,t.$dataListPure,i.path,function(t,n){"INPUT"===e.tagName?e.value=n:e.innerText=n})}},e),e.removeAttribute("bp-model")}},{key:"bindMoustache",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=t.nodeValue,o=t.nodeValue,u=o.match(/{{.*?}}/gi),s={};if(a.isArray(u)&&u.length>0){u.forEach(function(e){var u=e.slice(2,-2).trim();/^@{([\d]+)}$/gi.test(u)?s[e]=u.match(/^@{([\d]+)}$/)[1]:!function(){var c=a.parseData(a.wrapAbsPath(r,u),n.$dataList);s[e]=c.data,n.register(n.$dataList,n.$dataListPure,c.path,function(e,n){s["{{ "+c.path.join(".")+" }}"]=n;for(var r in s)o=i.replace(r,s[r]);t.nodeValue=o})}()});for(var c in s)o=i.replace(c,s[c])}t.nodeValue=o}},{key:"bindClass",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=a.wrapAbsPath(n,e.getAttribute("bp-class"));a.ignoreInnerDirectives(r,[],function(e){var n=a.parseData(r,t.$dataList);e.classList.contains(n.data)||e.classList.add(n.data),t.register(t.$dataList,t.$dataListPure,n.path,function(t,n){e.classList.remove(t),e.classList.contains(n)||e.classList.add(n)})},e),e.removeAttribute("bp-class")}},{key:"bindPre",value:function(e){e.removeAttribute("bp-pre")}},{key:"bindEvent",value:function(e,t,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};a.ignoreInnerDirectives(t,[],function(e,t,n,r){i.$eventList[t].type=n,e.addEventListener(n,function(){i.$eventList[t].fn.call(i.$dataList,e,r,o)})},e,t,n,r,o)}},{key:"bindBind",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];a.ignoreInnerDirectives(t,[],function(e,t,n){var o=a.wrapAbsPath(i,t),u=a.parseData(o,r.$dataList);e.setAttribute(n,u.data),r.register(r.$dataList,r.$dataListPure,u.path,function(t,r){e.setAttribute(n,r)})},e,t,n)}},{key:"bindFor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.getAttribute("bp-for").split(/\s+in\s+/),o=i[1],u=i[0],s=a.randomSequence(12);if(/^@/gi.test(u)||a.throwError('Invalid alias name when initializing a "bp-for" condition -> "'+u+'".','Please make sure the alias name is start with a "@" symbol.'),/\./gi.test(o)){var c=o.split(".");n[o]=n[c[0]]+"."+c[1]}else n[o]=o;for(var f=a.clone(n),l=a.clone(r),p=a.parseData(n[o],this.$dataList),d=e.parentNode,h=document.createDocumentFragment(),v=0;v<p.data.length;v++){var y=e.cloneNode(!0),b=n[o]+"."+v;n[u]=b,r[u]=v,y.removeAttribute("bp-for"),y.setAttribute("bp-for-rendered-id",s),this.bindForItemsRecursion(y,n,r,b,v,!0,function(e){h.appendChild(e)})}d.replaceChild(h,e),this.register(this.$dataList,this.$dataListPure,p.path,function(n,r){for(var i=document.createDocumentFragment(),a=0;a<r.length;a++){var c=e.cloneNode(!0),p=f[o]+"."+a;f[u]=p,l[u]=a,c.removeAttribute("bp-for"),c.setAttribute("bp-for-rendered-id",s),t.bindForItemsRecursion(c,f,l,p,a,!0,function(e){i.appendChild(e)})}for(var h=d.querySelectorAll("[bp-for-rendered-id='"+s+"']"),v=0;v<h.length;v++)0===v?d.replaceChild(i,h.item(v)):h.item(v).remove()})}},{key:"bindForItemsRecursion",value:function(e,t,n,r,i){for(var o=this,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=!!a.isHTMLCollection(e),f=function(u){var s=c?e[u]:e,f=s.childNodes;if(f.forEach(function(e,r){e.nodeType===Node.TEXT_NODE&&!function(){var r=e.nodeValue,i=e.nodeValue,u=i.match(/{{.*?}}/gi),c={};if(a.isArray(u)&&u.length>0){u.forEach(function(e){var r=e.slice(2,-2).trim(),i=r;/^@/gi.test(r)&&(i=/\[\[index\]\]/gi.test(r)?"@{"+n[r.match(/^(.*)\[\[index\]\]$/)[1]]+"}":r.replace(/^@[a-z0-9A-Z_]*/,t[r.split(".")[0]])),c[e]="{{ "+i+" }}"});for(var f in c)i=r.replace(f,c[f])}e.nodeValue=i,o.bindMoustache(s,e)}()}),!s.hasAttributes()&&c)return s.children.length>0&&o.bindForItemsRecursion(s.children,t,n,r,i),"continue";for(var l=s.attributes,p=[],d=0;d<l.length;d++){var h=l.item(d);p.push(h.name),/bp-event/gi.test(h.name)&&!function(){var e=[];if(/bp-event:/gi.test(h.name))e.push({_fnType:h.name.split(":")[1],_fnName:h.value});else{var t=h.value.match(/[a-zA-Z]+:[a-zA-Z0-9_$]+/gi);t.forEach(function(t){e.push({_fnType:t.split(":")[0],_fnName:t.split(":")[1]})})}e.forEach(function(e){var t=e._fnType,n=e._fnName;/^@:/gi.test(n)?o.bindEvent(s,n.split(":")[1],t,o.$dataList,{index:i}):o.bindEvent(s,n,t,o.$dataList,{})})}(),/bp-bind/gi.test(h.name)&&!function(){var e=[];if(/bp-bind:/gi.test(h.name))e.push({_bindKey:h.name.split(":")[1],_thisSubModelAbs:h.value});else{var n=h.value.match(/[a-zA-Z0-9_$-]+:[a-zA-Z0-9_$.]+/gi);n.forEach(function(t){e.push({_bindKey:t.split(":")[0],_thisSubModelAbs:t.split(":")[1]})})}e.forEach(function(e){var n=e._bindKey,r=e._thisSubModelAbs;/^@/gi.test(r)&&(r=r.replace(/^@[a-z0-9A-Z_]*/,t[r.split(".")[0]])),o.bindBind(s,r,n)})}()}if(p.includes("bp-for"))return o.bindFor(s,t,n),"continue";if(p.includes("bp-ref")&&o.bindRef(s),p.includes("bp-class")){var v=s.getAttribute("bp-class"),y=v;/^@/gi.test(v)&&(y=v.replace(/^@[a-z0-9A-Z_]*/,t[v.split(".")[0]])),y!==v&&s.setAttribute("bp-class",y),o.bindClass(s)}if(p.includes("bp-model")){var b=s.getAttribute("bp-model"),m=b;/^@/gi.test(b)&&(m=/\[\[index\]\]/gi.test(b)?"@{"+n[b.match(/^(.*)\[\[index\]\]$/)[1]]+"}":/@{\d+}/gi.test(b)?b:b.replace(/^@[a-z0-9A-Z_]*/,t[b.split(".")[0]])),m!==b&&s.setAttribute("bp-model",m),o.bindModel(s)}if(p.includes("bp-show")){var g=s.getAttribute("bp-show"),w=g;/^@/gi.test(g)&&(w=g.replace(/^@[a-z0-9A-Z_]*/,t[g.split(".")[0]])),w!==g&&s.setAttribute("bp-show",w),o.bindShow(s)}s.children.length>0&&o.bindForItemsRecursion(s.children,t,n,r,i)},l=0;l<(c?e.length:1);l++){f(l)}u&&s&&s.call(this,e)}},{key:"observePath",value:function(e,t,n,r){var i=this;a.isArray(n)&&!function(){var o=e,a=void 0;n.forEach(function(e,t){/^\d+$/.test(e)&&(e=parseInt(e)),t<n.length-1?o=o[e]:a=e}),t=n.join("."),i.observeKey(o,t,a,r)}()}},{key:"observeKey",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a.isArray(n)?this.observePath(e,t,n,i):!function(){var o=e[n],u=t;a.isObject(o)?(Object.defineProperty(e,n,{get:function(){return o},set:function(e){e!==o&&(i&&i.forEach(function(t){t.call(r,o,e)}),o=e,a.renderObjectValueByPath(r.$dataListPure,u,e))},enumerable:!0,configurable:!0}),Object.keys(o).forEach(function(e){r.observeKey(o,u+"."+e,e,i)})):a.isArray(o)?(Object.defineProperty(e,n,{get:function(){return o},set:function(e){e!==o&&(i&&i.forEach(function(t){t.call(r,o,e)}),o=e,a.renderObjectValueByPath(r.$dataListPure,u,e))},enumerable:!0,configurable:!0}),r.observeArray(o,u,i)):Object.defineProperty(e,n,{get:function(){return o},set:function(e){e!==o&&(i&&i.forEach(function(t){t.call(r,o,e)}),o=e,a.renderObjectValueByPath(r.$dataListPure,u,e))},enumerable:!0,configurable:!0})}()}},{key:"observeArray",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"],o=Array.prototype,u=Object.create(o),s=t;i.forEach(function(t){Object.defineProperty(u,t,{enumerable:!0,configurable:!0,writable:!0,value:function(){for(var i,u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];var l=e.slice(),p=(i=o[t]).call.apply(i,[e].concat(c)),d=e;return a.renderObjectValueByPath(n.$dataListPure,s,d),r&&r.forEach(function(e){e.call(n,l,d)}),p}})}),e.__proto__=u}},{key:"register",value:function e(t,n,r,i){var e=this.$registers.find(function(e){if(Object.is(e.obj,t)&&(e.key===r||e.key.toString()===r.toString()))return e});e?e.fns.push(i):this.$registers.push({obj:t,rootPath:[],key:r,fns:[i]})}},{key:"attach",value:function(){var e=this;this.$registers.forEach(function(t){e.observeKey(t.obj,t.rootPath,t.key,t.fns)})}}]),e}();return d});
//# sourceMappingURL=ballpen.min.js.map
