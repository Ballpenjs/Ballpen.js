!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ballpen=e()}(this,function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),i=function(){function i(e,n){t(this,i),this.el=document.querySelector(e),this.dataModel=n,this.initOptions(n),this.scan(this.el)}return e(i,[{key:"initOptions",value:function(t){t.event&&(this.eventList={},this.initEventList(t.event)),t.data&&(this.dataList=t.data,this.modelList={})}},{key:"initEventList",value:function(t){if(t){var e=t;for(var i in e)this.eventList[i]={},this.eventList[i].type="",this.eventList[i].fn=e[i]}}},{key:"scan",value:function(t){for(var e=0;e<t.children.length;e++){var i=t.children[e];this.bind(i),i.children.length>0&&this.scan(i)}}},{key:"bind",value:function(t){for(var e=t.attributes,i=0;i<e.length;i++){var n=e.item(i);/bp-model=.*/gi.test(n)&&this.bindModel(t),/bp-class=.*/gi.test(n)&&this.bindClass(t),/bp-event=.*/gi.test(n)&&this.bindEvent(t),/bp-for=.*/gi.test(n)&&this.bindFor(t)}}},{key:"parseData",value:function(t){var e=this,i=t.split("."),n=void 0,a=[];return i.forEach(function(t,i){0===i?(n=e.dataList[t],a.push(t)):(n=n[t],a.push(t))}),{path:a,data:n}}},{key:"bindModel",value:function(t){var e=t.getAttribute("bp-model"),i=this.parseData(e);"INPUT"===t.tagName?t.value=i.data:t.innerText=i.data}},{key:"bindClass",value:function(t){var e=t.getAttribute("bp-class"),i=this.parseData(e);t.classList.contains(i.data)||t.classList.add(i.data)}},{key:"bindEvent",value:function(t){var e=t.getAttribute("bp-event"),i=e.split(/@/),n=i[1],a=i[0];this.eventList[n].type=a,t.addEventListener(a,this.eventList[n].fn)}},{key:"bindFor",value:function(t){for(var e=t.getAttribute("bp-for"),i=this.parseData(e).data,n=document.createDocumentFragment(),a=0;a<i.length;a++){var r=t.cloneNode(!0);r.removeAttribute("bp-for"),null!==r.getAttribute("bp-class")&&this.bindClass(r),null!==r.getAttribute("bp-event")&&this.bindEvent(r);var s=e+"."+a;n.appendChild(this.bindForItems(r,s))}t.parentNode.appendChild(n),t.remove()}},{key:"bindForItems",value:function(t,e){for(var i=0;i<t.children.length;i++){var n=t.children[i];if(null!==n.getAttribute("bp-class")&&this.bindClass(n),null!==n.getAttribute("bp-event")&&this.bindEvent(n),n.getAttribute("bp-for-item")){var a=n.getAttribute("bp-for-item"),r=e+("."+a);n.setAttribute("bp-model",r),n.removeAttribute("bp-for-item")}null!==n.getAttribute("bp-model")&&this.bindModel(n),n.children.length>0&&this.bindForItems(n)}return t}}]),i}();return i});
//# sourceMappingURL=ballpen.min.js.map
