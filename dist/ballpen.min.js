!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Ballpen=t()}(this,function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function t(){e(this,t)}return i(t,null,[{key:"findReferenceNode",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=r;if(t.isObject(e))for(var i in e)(t.isObject(e[i])||t.isArray(e[i]))&&(o+=i+".",n.set(o.slice(0,-1),[]),t.findReferenceNode(e[i],n,o));else t.isArray(e)&&e.forEach(function(e,r){(t.isObject(e)||t.isArray(e))&&(o+=r+".",n.set(o.slice(0,-1),[]),t.findReferenceNode(e,n,o))});return n}},{key:"isHTMLCollection",value:function(e){return"[object HTMLCollection]"===Object.prototype.toString.call(e)}},{key:"isArray",value:function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)}},{key:"toArray",value:function(e){return Array.prototype.slice.call(e)}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isReferenceType",value:function(e){return t.isObject(e)||t.isArray(e)}},{key:"renderObjectValueByPath",value:function(e,n,r){var o=n.split(".");if("undefined"==typeof t.parseData(n,e).data&&t.throwError('Find an invalid watcher path when initializing Ballpen.js -> "'+n+'"',"Please make sure the watcher path you set is exist and valid."),1===o.length)e[o[0]]=r;else for(var i=0;i<o.length-1;i++)e=e[o[i]],e||t.throwError('Find an invalid watcher path when initializing Ballpen.js -> "'+n+'"',"Please make sure the watcher path you set is exist and valid."),i===o.length-2&&(e[o[o.length-1]]=r)}},{key:"parseData",value:function(e,t){var n=e.split("."),r=t,o=[];return n.forEach(function(e,n){0===n?(r=t[e],o.push(e)):(r=r[e],o.push(e))}),{path:o,data:r}}},{key:"ignoreInnerDirectives",value:function(e,t,n){for(var r=arguments.length,o=Array(r>3?r-3:0),i=3;i<r;i++)o[i-3]=arguments[i];var a=this;t.forEach(function(t){t.test(e)&&n&&n.call.apply(n,[a].concat(o))}),/^@/gi.test(e)||n&&n.call.apply(n,[this].concat(o))}},{key:"clone",value:function(e){var n=void 0;if(null===e||"object"!==("undefined"==typeof e?"undefined":o(e)))return e;if(e instanceof Date)return n=new Date,n.setTime(e.getTime()),n;if(e instanceof Array){n=[];for(var r=0,i=e.length;r<i;r++)n[r]=t.clone(e[r]);return n}if(e instanceof Object){n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=t.clone(e[a]));return n}t.throwError("Internal error, unable to copy object, type is not supported.","Please contact the author to fix this issue.")}},{key:"wrapAbsPath",value:function(e,n){return(t.isArray(e)&&e.length>0?e.join(".")+".":e.toString().length>0?e.toString()+".":"")+(t.isArray(n)&&n.length>0?n.join("."):n.toString().length>0?n.toString():"")}},{key:"throwError",value:function(e,t){var n=new Error("[Ballpen Parser Error] \n\n [Message] \n\n - "+e+" \n\n [Description] \n\n - "+t+" \n");throw n.name="BallpenError",n}},{key:"randomSequence",value:function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",r=0;r<e;r++){var o=Math.ceil(35*Math.random());n+=t[o]}return n}}]),t}(),u="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=t(function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r,o){"object"==n(t)&&"object"==n(e)?e.exports=o():"object"==n(t)?t.axios=o():r.axios=o()}(u,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){function r(e){var t=new a(e),n=i(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var o=n(2),i=n(3),a=n(4),u=n(5),c=r(u);c.Axios=a,c.create=function(e){return r(o.merge(u,e))},c.Cancel=n(22),c.CancelToken=n(23),c.isCancel=n(19),c.all=function(e){return Promise.all(e)},c.spread=n(24),e.exports=c,e.exports.default=c},function(e,t,r){function o(e){return"[object Array]"===E.call(e)}function i(e){return"[object ArrayBuffer]"===E.call(e)}function a(e){return"undefined"!=typeof FormData&&e instanceof FormData}function u(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function c(e){return"string"==typeof e}function s(e){return"number"==typeof e}function f(e){return"undefined"==typeof e}function l(e){return null!==e&&"object"==("undefined"==typeof e?"undefined":n(e))}function d(e){return"[object Date]"===E.call(e)}function p(e){return"[object File]"===E.call(e)}function h(e){return"[object Blob]"===E.call(e)}function v(e){return"[object Function]"===E.call(e)}function y(e){return l(e)&&v(e.pipe)}function b(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function m(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function w(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==("undefined"==typeof e?"undefined":n(e))||o(e)||(e=[e]),o(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function S(){function e(e,r){"object"==n(t[r])&&"object"==("undefined"==typeof e?"undefined":n(e))?t[r]=S(t[r],e):t[r]=e}for(var t={},r=0,o=arguments.length;r<o;r++)w(arguments[r],e);return t}function _(e,t,n){return w(t,function(t,r){n&&"function"==typeof t?e[r]=A(t,n):e[r]=t}),e}var A=r(3),E=Object.prototype.toString;e.exports={isArray:o,isArrayBuffer:i,isFormData:a,isArrayBufferView:u,isString:c,isNumber:s,isObject:l,isUndefined:f,isDate:d,isFile:p,isBlob:h,isFunction:v,isStream:y,isURLSearchParams:b,isStandardBrowserEnv:m,forEach:w,merge:S,extend:_,trim:g}},function(e,t){e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(5),i=n(2),a=n(16),u=n(17),c=n(20),s=n(21);r.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,this.defaults,{method:"get"},e),e.baseURL&&!c(e.url)&&(e.url=s(e.baseURL,e.url));var t=[u,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function o(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(7):"undefined"!=typeof process&&(e=n(7)),e}var i=n(2),a=n(6),u=/^\)\]\}',?\n/,c={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:o(),transformRequest:[function(e,t){return a(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(u,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){s.headers[e]={}}),i.forEach(["post","put","patch"],function(e){s.headers[e]=i.merge(c)}),e.exports=s},function(e,t,n){var r=n(2);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){var r=n(2),o=n(8),i=n(11),a=n(12),u=n(13),c=n(9),s="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(14);e.exports=function(e){return new Promise(function(t,f){var l=e.data,d=e.headers;r.isFormData(l)&&delete d["Content-Type"];var p=new XMLHttpRequest,h="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||u(e.url)||(p=new window.XDomainRequest,h="onload",v=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var y=e.auth.username||"",b=e.auth.password||"";d.Authorization="Basic "+s(y+":"+b)}if(p.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[h]=function(){if(p&&(4===p.readyState||v)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?p.response:p.responseText,i={data:r,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:e,request:p};o(t,f,i),p=null}},p.onerror=function(){f(c("Network Error",e)),p=null},p.ontimeout=function(){f(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),p=null},r.isStandardBrowserEnv()){var g=n(15),m=(e.withCredentials||u(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;m&&(d[e.xsrfHeaderName]=m)}if("setRequestHeader"in p&&r.forEach(d,function(e,t){"undefined"==typeof l&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(e){if("json"!==p.responseType)throw e}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),f(e),p=null)}),void 0===l&&(l=null),p.send(l)})}},function(e,t,n){var r=n(9);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){var r=n(10);e.exports=function(e,t,n,o){var i=new Error(e);return r(i,t,n,o)}},function(e,t){e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(2);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}return i&&(e+=(e.indexOf("?")===-1?"?":"&")+i),e}},function(e,t,n){var r=n(2);e.exports=function(e){var t,n,o,i={};return e?(r.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}},function(e,t,n){var r=n(2);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=r.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t){function n(){this.message="String contains an invalid character"}function r(e){for(var t,r,i=String(e),a="",u=0,c=o;i.charAt(0|u)||(c="=",u%1);a+=c.charAt(63&t>>8-u%1*8)){if(r=i.charCodeAt(u+=.75),r>255)throw new n;t=t<<8|r}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=r},function(e,t,n){var r=n(2);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,i,a){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(o)&&u.push("path="+o),r.isString(i)&&u.push("domain="+i),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){function r(){this.handlers=[]}var o=n(2);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(2),i=n(18),a=n(19),u=n(5);e.exports=function(e){r(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||u.adapter;return t(e).then(function(t){return r(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){var r=n(2);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,n){function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(22);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e,t=new r(function(t){e=t});return{token:t,cancel:e}},e.exports=r},function(e,t){e.exports=function(e){return function(t){return e.apply(null,t)}}}])})}),s=t(function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){function r(e){function t(t,n,r,o,i,a){for(;i>=0&&i<a;i+=e){var u=o?o[i]:i;r=n(r,t[u],u,t)}return r}return function(n,r,o,i){r=_(r,i,4);var a=!I(n)&&S.keys(n),u=(a||n).length,c=e>0?0:u-1;return arguments.length<3&&(o=n[a?a[c]:c],c+=e),t(n,r,o,a,c,u)}}function o(e){return function(t,n,r){n=A(n,r);for(var o=O(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(n(t[i],i,t))return i;return-1}}function i(e,t,n){return function(r,o,i){var a=0,u=O(r);if("number"==typeof i)e>0?a=i>=0?i:Math.max(i+u,a):u=i>=0?Math.min(i+1,u):i+u+1;else if(n&&i&&u)return i=n(r,o),r[i]===o?i:-1;if(o!==o)return i=t(p.call(r,a,u),S.isNaN),i>=0?i+a:-1;for(i=e>0?a:u-1;i>=0&&i<u;i+=e)if(r[i]===o)return i;return-1}}function a(e,t){var n=P.length,r=e.constructor,o=S.isFunction(r)&&r.prototype||f,i="constructor";for(S.has(e,i)&&!S.contains(t,i)&&t.push(i);n--;)i=P[n],i in e&&e[i]!==o[i]&&!S.contains(t,i)&&t.push(i)}var u=this,c=u._,s=Array.prototype,f=Object.prototype,l=Function.prototype,d=s.push,p=s.slice,h=f.toString,v=f.hasOwnProperty,y=Array.isArray,b=Object.keys,g=l.bind,m=Object.create,w=function(){},S=function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};e.exports&&(t=e.exports=S),t._=S,S.VERSION="1.8.3";var _=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return function(){return e.apply(t,arguments)}},A=function(e,t,n){return null==e?S.identity:S.isFunction(e)?_(e,t,n):S.isObject(e)?S.matcher(e):S.property(e)};S.iteratee=function(e,t){return A(e,t,1/0)};var E=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],a=e(i),u=a.length,c=0;c<u;c++){var s=a[c];t&&void 0!==n[s]||(n[s]=i[s])}return n}},x=function(e){if(!S.isObject(e))return{};if(m)return m(e);w.prototype=e;var t=new w;return w.prototype=null,t},j=function(e){return function(t){return null==t?void 0:t[e]}},k=Math.pow(2,53)-1,O=j("length"),I=function(e){var t=O(e);return"number"==typeof t&&t>=0&&t<=k};S.each=S.forEach=function(e,t,n){t=_(t,n);var r,o;if(I(e))for(r=0,o=e.length;r<o;r++)t(e[r],r,e);else{var i=S.keys(e);for(r=0,o=i.length;r<o;r++)t(e[i[r]],i[r],e)}return e},S.map=S.collect=function(e,t,n){t=A(t,n);for(var r=!I(e)&&S.keys(e),o=(r||e).length,i=Array(o),a=0;a<o;a++){var u=r?r[a]:a;i[a]=t(e[u],u,e)}return i},S.reduce=S.foldl=S.inject=r(1),S.reduceRight=S.foldr=r(-1),S.find=S.detect=function(e,t,n){var r;if(r=I(e)?S.findIndex(e,t,n):S.findKey(e,t,n),void 0!==r&&r!==-1)return e[r]},S.filter=S.select=function(e,t,n){var r=[];return t=A(t,n),S.each(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r},S.reject=function(e,t,n){return S.filter(e,S.negate(A(t)),n)},S.every=S.all=function(e,t,n){t=A(t,n);for(var r=!I(e)&&S.keys(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(!t(e[a],a,e))return!1}return!0},S.some=S.any=function(e,t,n){t=A(t,n);for(var r=!I(e)&&S.keys(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(t(e[a],a,e))return!0}return!1},S.contains=S.includes=S.include=function(e,t,n,r){return I(e)||(e=S.values(e)),("number"!=typeof n||r)&&(n=0),S.indexOf(e,t,n)>=0},S.invoke=function(e,t){var n=p.call(arguments,2),r=S.isFunction(t);return S.map(e,function(e){var o=r?t:e[t];return null==o?o:o.apply(e,n)})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matcher(t))},S.findWhere=function(e,t){return S.find(e,S.matcher(t))},S.max=function(e,t,n){var r,o,i=-(1/0),a=-(1/0);if(null==t&&null!=e){e=I(e)?e:S.values(e);for(var u=0,c=e.length;u<c;u++)r=e[u],r>i&&(i=r)}else t=A(t,n),S.each(e,function(e,n,r){o=t(e,n,r),(o>a||o===-(1/0)&&i===-(1/0))&&(i=e,a=o)});return i},S.min=function(e,t,n){var r,o,i=1/0,a=1/0;if(null==t&&null!=e){e=I(e)?e:S.values(e);for(var u=0,c=e.length;u<c;u++)r=e[u],r<i&&(i=r)}else t=A(t,n),S.each(e,function(e,n,r){o=t(e,n,r),(o<a||o===1/0&&i===1/0)&&(i=e,a=o)});return i},S.shuffle=function(e){for(var t,n=I(e)?e:S.values(e),r=n.length,o=Array(r),i=0;i<r;i++)t=S.random(0,i),t!==i&&(o[i]=o[t]),o[t]=n[i];return o},S.sample=function(e,t,n){return null==t||n?(I(e)||(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))},S.sortBy=function(e,t,n){return t=A(t,n),S.pluck(S.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var R=function(e){return function(t,n,r){var o={};return n=A(n,r),S.each(t,function(r,i){var a=n(r,i,t);e(o,r,a)}),o}};S.groupBy=R(function(e,t,n){S.has(e,n)?e[n].push(t):e[n]=[t]}),S.indexBy=R(function(e,t,n){e[n]=t}),S.countBy=R(function(e,t,n){S.has(e,n)?e[n]++:e[n]=1}),S.toArray=function(e){return e?S.isArray(e)?p.call(e):I(e)?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:I(e)?e.length:S.keys(e).length},S.partition=function(e,t,n){t=A(t,n);var r=[],o=[];return S.each(e,function(e,n,i){(t(e,n,i)?r:o).push(e)}),[r,o]},S.first=S.head=S.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:S.initial(e,e.length-t)},S.initial=function(e,t,n){return p.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},S.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:S.rest(e,Math.max(0,e.length-t))},S.rest=S.tail=S.drop=function(e,t,n){return p.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var D=function e(t,n,r,o){for(var i=[],a=0,u=o||0,c=O(t);u<c;u++){var s=t[u];if(I(s)&&(S.isArray(s)||S.isArguments(s))){n||(s=e(s,n,r));var f=0,l=s.length;for(i.length+=l;f<l;)i[a++]=s[f++]}else r||(i[a++]=s)}return i};S.flatten=function(e,t){return D(e,t,!1)},S.without=function(e){return S.difference(e,p.call(arguments,1))},S.uniq=S.unique=function(e,t,n,r){S.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=A(n,r));for(var o=[],i=[],a=0,u=O(e);a<u;a++){var c=e[a],s=n?n(c,a,e):c;t?(a&&i===s||o.push(c),i=s):n?S.contains(i,s)||(i.push(s),o.push(c)):S.contains(o,c)||o.push(c)}return o},S.union=function(){return S.uniq(D(arguments,!0,!0))},S.intersection=function(e){for(var t=[],n=arguments.length,r=0,o=O(e);r<o;r++){var i=e[r];if(!S.contains(t,i)){for(var a=1;a<n&&S.contains(arguments[a],i);a++);a===n&&t.push(i)}}return t},S.difference=function(e){var t=D(arguments,!0,!0,1);return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){return S.unzip(arguments)},S.unzip=function(e){for(var t=e&&S.max(e,O).length||0,n=Array(t),r=0;r<t;r++)n[r]=S.pluck(e,r);return n},S.object=function(e,t){for(var n={},r=0,o=O(e);r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},S.findIndex=o(1),S.findLastIndex=o(-1),S.sortedIndex=function(e,t,n,r){n=A(n,r,1);for(var o=n(t),i=0,a=O(e);i<a;){var u=Math.floor((i+a)/2);n(e[u])<o?i=u+1:a=u}return i},S.indexOf=i(1,S.findIndex,S.sortedIndex),S.lastIndexOf=i(-1,S.findLastIndex),S.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;i<r;i++,e+=n)o[i]=e;return o};var N=function(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var i=x(e.prototype),a=e.apply(i,o);return S.isObject(a)?a:i};S.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,p.call(arguments,1));if(!S.isFunction(e))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),r=function r(){return N(e,r,t,this,n.concat(p.call(arguments)))};return r},S.partial=function(e){var t=p.call(arguments,1),n=function n(){for(var r=0,o=t.length,i=Array(o),a=0;a<o;a++)i[a]=t[a]===S?arguments[r++]:t[a];for(;r<arguments.length;)i.push(arguments[r++]);return N(e,n,this,this,i)};return n},S.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=S.bind(e[n],e);return e},S.memoize=function(e,t){var n=function n(r){var o=n.cache,i=""+(t?t.apply(this,arguments):r);return S.has(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return n.cache={},n},S.delay=function(e,t){var n=p.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=S.partial(S.delay,S,1),S.throttle=function(e,t,n){var r,o,i,a=null,u=0;n||(n={});var c=function(){u=n.leading===!1?0:S.now(),a=null,i=e.apply(r,o),a||(r=o=null)};return function(){var s=S.now();u||n.leading!==!1||(u=s);var f=t-(s-u);return r=this,o=arguments,f<=0||f>t?(a&&(clearTimeout(a),a=null),u=s,i=e.apply(r,o),a||(r=o=null)):a||n.trailing===!1||(a=setTimeout(c,f)),i}},S.debounce=function(e,t,n){var r,o,i,a,u,c=function c(){var s=S.now()-a;s<t&&s>=0?r=setTimeout(c,t-s):(r=null,n||(u=e.apply(i,o),r||(i=o=null)))};return function(){i=this,o=arguments,a=S.now();var s=n&&!r;return r||(r=setTimeout(c,t)),s&&(u=e.apply(i,o),i=o=null),u}},S.wrap=function(e,t){return S.partial(t,e)},S.negate=function(e){return function(){return!e.apply(this,arguments)}},S.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},S.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},S.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},S.once=S.partial(S.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];S.keys=function(e){if(!S.isObject(e))return[];if(b)return b(e);var t=[];for(var n in e)S.has(e,n)&&t.push(n);return L&&a(e,t),t},S.allKeys=function(e){if(!S.isObject(e))return[];var t=[];for(var n in e)t.push(n);return L&&a(e,t),t},S.values=function(e){for(var t=S.keys(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r},S.mapObject=function(e,t,n){t=A(t,n);for(var r,o=S.keys(e),i=o.length,a={},u=0;u<i;u++)r=o[u],a[r]=t(e[r],r,e);return a},S.pairs=function(e){for(var t=S.keys(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=[t[o],e[t[o]]];return r},S.invert=function(e){for(var t={},n=S.keys(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=E(S.allKeys),S.extendOwn=S.assign=E(S.keys),S.findKey=function(e,t,n){t=A(t,n);for(var r,o=S.keys(e),i=0,a=o.length;i<a;i++)if(r=o[i],t(e[r],r,e))return r},S.pick=function(e,t,n){var r,o,i={},a=e;if(null==a)return i;S.isFunction(t)?(o=S.allKeys(a),r=_(t,n)):(o=D(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var u=0,c=o.length;u<c;u++){var s=o[u],f=a[s];r(f,s,a)&&(i[s]=f)}return i},S.omit=function(e,t,n){if(S.isFunction(t))t=S.negate(t);else{var r=S.map(D(arguments,!1,!1,1),String);t=function(e,t){return!S.contains(r,t)}}return S.pick(e,t,n)},S.defaults=E(S.allKeys,!0),S.create=function(e,t){var n=x(e);return t&&S.extendOwn(n,t),n},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isMatch=function(e,t){var n=S.keys(t),r=n.length;if(null==e)return!r;for(var o=Object(e),i=0;i<r;i++){var a=n[i];if(t[a]!==o[a]||!(a in o))return!1}return!0};var C=function e(t,r,o,i){if(t===r)return 0!==t||1/t===1/r;if(null==t||null==r)return t===r;t instanceof S&&(t=t._wrapped),r instanceof S&&(r=r._wrapped);var a=h.call(t);if(a!==h.call(r))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!==+t?+r!==+r:0===+t?1/+t===1/r:+t===+r;case"[object Date]":case"[object Boolean]":return+t===+r}var u="[object Array]"===a;if(!u){if("object"!=("undefined"==typeof t?"undefined":n(t))||"object"!=("undefined"==typeof r?"undefined":n(r)))return!1;var c=t.constructor,s=r.constructor;if(c!==s&&!(S.isFunction(c)&&c instanceof c&&S.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in r)return!1}o=o||[],i=i||[];for(var f=o.length;f--;)if(o[f]===t)return i[f]===r;if(o.push(t),i.push(r),u){if(f=t.length,f!==r.length)return!1;for(;f--;)if(!e(t[f],r[f],o,i))return!1}else{var l,d=S.keys(t);if(f=d.length,S.keys(r).length!==f)return!1;for(;f--;)if(l=d[f],!S.has(r,l)||!e(t[l],r[l],o,i))return!1}return o.pop(),i.pop(),!0};S.isEqual=function(e,t){return C(e,t)},S.isEmpty=function(e){return null==e||(I(e)&&(S.isArray(e)||S.isString(e)||S.isArguments(e))?0===e.length:0===S.keys(e).length)},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=y||function(e){return"[object Array]"===h.call(e)},S.isObject=function(e){var t="undefined"==typeof e?"undefined":n(e);return"function"===t||"object"===t&&!!e},S.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){S["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return S.has(e,"callee")}),"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":n(Int8Array))&&(S.isFunction=function(e){return"function"==typeof e||!1}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!==+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return null!=e&&v.call(e,t)},S.noConflict=function(){return u._=c,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.noop=function(){},S.property=j,S.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},S.matcher=S.matches=function(e){return e=S.extendOwn({},e),function(t){return S.isMatch(t,e)}},S.times=function(e,t,n){var r=Array(Math.max(0,e));t=_(t,n,1);for(var o=0;o<e;o++)r[o]=t(o);return r},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=S.invert(B),$=function(e){var t=function(t){return e[t]},n="(?:"+S.keys(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}};S.escape=$(B),S.unescape=$(T),S.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),S.isFunction(r)?r.call(e):r};var F=0;S.uniqueId=function(e){var t=++F+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+U[e]};S.template=function(e,t,n){!t&&n&&(t=n),t=S.defaults({},t,S.templateSettings);var r=RegExp([(t.escape||M).source,(t.interpolate||M).source,(t.evaluate||M).source].join("|")+"|$","g"),o=0,i="__p+='";e.replace(r,function(t,n,r,a,u){return i+=e.slice(o,u).replace(z,q),o=u+t.length,n?i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(t.variable||"obj","_",i)}catch(e){throw e.source=i,e}var u=function(e){return a.call(this,e,S)},c=t.variable||"obj";return u.source="function("+c+"){\n"+i+"}",u},S.chain=function(e){var t=S(e);return t._chain=!0,t};var V=function(e,t){return e._chain?S(t).chain():t};S.mixin=function(e){S.each(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return d.apply(e,arguments),V(this,n.apply(S,e))}})},S.mixin(S),S.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){
var t=s[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],V(this,n)}}),S.each(["concat","join","slice"],function(e){var t=s[e];S.prototype[e]=function(){return V(this,t.apply(this._wrapped,arguments))}}),S.prototype.value=function(){return this._wrapped},S.prototype.valueOf=S.prototype.toJSON=S.prototype.value,S.prototype.toString=function(){return""+this._wrapped}}).call(u)}),f=t(function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r,o){"object"==n(t)?e.exports=o():r.BallpenPluginCookie=o()}(u,function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(){function n(){e(this,n)}return t(n,null,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.converter=e,n}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.core(this.converter,e,t,n)}},{key:"get",value:function(e){r.core.call(r.core,this.converter,e)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.core(this.converter,e,"null",r.extend(t,{expires:-1}))}}]),n}(),r=function(){function r(){e(this,r)}return t(r,null,[{key:"extend",value:function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}},{key:"withConverter",value:function(e){return n.init(e)}},{key:"core",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments[1],o=arguments[2],i=arguments[3],a=Object.prototype.toString;if("undefined"!=typeof document){if(o){if(i=r.extend({path:"/"},i),"number"==typeof i.expires){var u=new Date;u.setMilliseconds(u.getMilliseconds()+i.expires/86400*864e5),i.expires=u}i.expires=i.expires?i.expires.toUTCString():"";try{"[object Object]"!==a.call(o)&&"[object Array]"!==a.call(o)||(o=JSON.stringify(o))}catch(e){}o=t||t.write?t.write?t.write(o,n):t(o,n):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[()]/g,escape);var c="";for(var s in i)i[s]&&(c+="; "+s,i[s]!==!0&&(c+="="+i[s]));return document.cookie=n+"="+o+c}n||(e={});for(var f=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,d=0;d<f.length;d++){var p=f[d].split("="),h=p.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var v=p[0].replace(l,decodeURIComponent);h=t?t.read?t.read(h,v):t(h,v):h.replace(l,decodeURIComponent);try{h=JSON.parse(h)}catch(e){}if(n===v){e=h;break}n||(e[v]=h)}catch(e){}}return e}}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.core(!1,e,t,n)}},{key:"get",value:function(e){return r.core.call(this,!1,e)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.core(!1,e,"null",r.extend(t,{expires:-1}))}}]),r}();return r})}),l=t(function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r,o){"object"==n(t)?e.exports=o():r.BallpenPluginCache=o()}(u,function(){function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="undefined"!=typeof window?window:"undefined"!=typeof u?u:"undefined"!=typeof self?self:{},i=t(function(t,r){var i="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":n(e)};!function(e){if("object"==i(r))t.exports=e();else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,n.localforage=e()}}(function(){return function t(n,r,o){function i(u,c){if(!r[u]){if(!n[u]){var s="function"==typeof e&&e;if(!c&&s)return s(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[u]={exports:{}};n[u][0].call(l.exports,function(e){var t=n[u][1][e];return i(t?t:e)},l,l.exports,t,n,r,o)}return r[u].exports}for(var a="function"==typeof e&&e,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(e,t,n){(function(e){function n(){f=!0;for(var e,t,n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}f=!1}function r(e){1!==l.push(e)||f||o()}var o,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,u=new i(n),c=e.document.createTextNode("");u.observe(c,{characterData:!0}),o=function(){c.data=a=++a%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)o="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(n,0)};else{var s=new e.MessageChannel;s.port1.onmessage=n,o=function(){s.port2.postMessage(0)}}var f,l=[];t.exports=r}).call(this,"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){function r(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,e!==r&&s(this,e)}function a(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){v(function(){var r;try{r=t(n)}catch(t){return y.reject(e,t)}r===e?y.reject(e,new TypeError("Cannot resolve promise with itself")):y.resolve(e,r)})}function c(e){var t=e&&e.then;if(e&&"object"==("undefined"==typeof e?"undefined":i(e))&&"function"==typeof t)return function(){t.apply(e,arguments)}}function s(e,t){function n(t){i||(i=!0,y.reject(e,t))}function r(t){i||(i=!0,y.resolve(e,t))}function o(){t(r,n)}var i=!1,a=f(o);"error"===a.status&&n(a.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function l(e){return e instanceof this?e:y.resolve(new this(r),e)}function d(e){var t=new this(r);return y.reject(t,e)}function p(e){function t(e,t){function r(e){a[t]=e,++u!==o||i||(i=!0,y.resolve(s,a))}n.resolve(e).then(r,function(e){i||(i=!0,y.reject(s,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=new Array(o),u=0,c=-1,s=new this(r);++c<o;)t(e[c],c);return s}function h(e){function t(e){n.resolve(e).then(function(e){i||(i=!0,y.resolve(u,e))},function(e){i||(i=!0,y.reject(u,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=-1,u=new this(r);++a<o;)t(e[a]);return u}var v=e(1),y={},b=["REJECTED"],g=["FULFILLED"],m=["PENDING"];t.exports=n=o,o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if("function"!=typeof e&&this.state===g||"function"!=typeof t&&this.state===b)return this;var n=new this.constructor(r);if(this.state!==m){var o=this.state===g?e:t;u(n,o,this.outcome)}else this.queue.push(new a(n,e,t));return n},a.prototype.callFulfilled=function(e){y.resolve(this.promise,e)},a.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},a.prototype.callRejected=function(e){y.reject(this.promise,e)},a.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},y.resolve=function(e,t){var n=f(c,t);if("error"===n.status)return y.reject(e,n.value);var r=n.value;if(r)s(e,r);else{e.state=g,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},y.reject=function(e,t){e.state=b,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},n.resolve=l,n.reject=d,n.all=p,n.race=h},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}function a(){try{if(!ue)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&fetch.toString().indexOf("[native code")!==-1;return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function u(){return"function"==typeof openDatabase}function c(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,o=0;o<e.length;o+=1)r.append(e[o]);return r.getBlob(t.type)}}function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function d(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function p(e){return new fe(function(t){var n=e.transaction(le,"readwrite"),r=s([""]);n.objectStore(le).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function h(e){return"boolean"==typeof ce?fe.resolve(ce):p(e).then(function(e){return ce=e})}function v(e){var t=se[e.name],n={};n.promise=new fe(function(e){n.resolve=e}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function y(e){var t=se[e.name],n=t.deferredOperations.pop();n&&n.resolve()}function b(e,t){return new fe(function(n,r){if(e.db){if(!t)return n(e.db);v(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=ue.open.apply(ue,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(le)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),y(e)}})}function g(e){return b(e,!1)}function m(e){return b(e,!0)}function w(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function S(e){return new fe(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function _(e){var t=d(atob(e.data));return s([t],{type:e.type})}function A(e){return e&&e.__local_forage_encoded_blob}function E(e){var t=this,n=t._initReady().then(function(){var e=se[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return l(n,e,e),n}function x(e){function t(){return fe.resolve()}var n=this,r={db:null};if(e)for(var o in e)r[o]=e[o];se||(se={});var i=se[r.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},se[r.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=E);for(var a=[],u=0;u<i.forages.length;u++){var c=i.forages[u];c!==n&&a.push(c._initReady().catch(t))}var s=i.forages.slice(0);return fe.all(a).then(function(){return r.db=i.db,g(r)}).then(function(e){return r.db=e,w(r,n._defaultConfig.version)?m(r):e}).then(function(e){r.db=i.db=e,n._dbInfo=r;for(var t=0;t<s.length;t++){var o=s[t];o!==n&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}})}function j(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new fe(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),A(e)&&(e=_(e)),t(e)},a.onerror=function(){r(a.error)}}).catch(r)});return f(r,t),r}function k(e,t){var n=this,r=new fe(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.openCursor(),u=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;A(r)&&(r=_(r));var o=e(r,n.key,u++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}).catch(r)});return f(r,t),r}function O(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new fe(function(n,o){var i;r.ready().then(function(){return i=r._dbInfo,"[object Blob]"===de.call(t)?h(i.db).then(function(e){return e?t:S(t)}):t}).then(function(t){var r=i.db.transaction(i.storeName,"readwrite"),a=r.objectStore(i.storeName),u=a.put(t,e);null===t&&(t=void 0),r.oncomplete=function(){void 0===t&&(t=null),n(t)},r.onabort=r.onerror=function(){var e=u.error?u.error:u.transaction.error;o(e)}}).catch(o)});return f(o,n),o}function I(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new fe(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName),u=a.delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(u.error)},i.onabort=function(){var e=u.error?u.error:u.transaction.error;r(e)}}).catch(r)});return f(r,t),r}function R(e){var t=this,n=new fe(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),i=o.objectStore(r.storeName),a=i.clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}).catch(n)});return f(n,e),n}function D(e){var t=this,n=new fe(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}).catch(n)});return f(n,e),n}function N(e,t){var n=this,r=new fe(function(t,r){return e<0?void t(null):void n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=!1,u=i.openCursor();u.onsuccess=function(){var n=u.result;return n?void(0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e))):void t(null)},u.onerror=function(){r(u.error)}}).catch(r)});return f(r,t),r}function L(e){var t=this,n=new fe(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.openCursor(),a=[];i.onsuccess=function(){var t=i.result;return t?(a.push(t.key),void t.continue()):void e(a)},i.onerror=function(){n(i.error)}}).catch(n)});return f(n,e),n}function P(e){var t,n,r,o,i,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var s=new ArrayBuffer(a),f=new Uint8Array(s);for(t=0;t<u;t+=4)n=he.indexOf(e[t]),r=he.indexOf(e[t+1]),o=he.indexOf(e[t+2]),i=he.indexOf(e[t+3]),f[c++]=n<<2|r>>4,f[c++]=(15&r)<<4|o>>2,f[c++]=(3&o)<<6|63&i;return s}function C(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=he[n[t]>>2],r+=he[(3&n[t])<<4|n[t+1]>>4],r+=he[(15&n[t+1])<<2|n[t+2]>>6],r+=he[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function B(e,t){var n="";if(e&&(n=De.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===De.call(e.buffer))){var r,o=be;e instanceof ArrayBuffer?(r=e,o+=me):(r=e.buffer,"[object Int8Array]"===n?o+=Se:"[object Uint8Array]"===n?o+=_e:"[object Uint8ClampedArray]"===n?o+=Ae:"[object Int16Array]"===n?o+=Ee:"[object Uint16Array]"===n?o+=je:"[object Int32Array]"===n?o+=xe:"[object Uint32Array]"===n?o+=ke:"[object Float32Array]"===n?o+=Oe:"[object Float64Array]"===n?o+=Ie:t(new Error("Failed to get type for BinaryArray"))),t(o+C(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=ve+e.type+"~"+C(this.result);t(be+we+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function T(e){if(e.substring(0,ge)!==be)return JSON.parse(e);var t,n=e.substring(Re),r=e.substring(ge,Re);if(r===we&&ye.test(n)){var o=n.match(ye);t=o[1],n=n.substring(o[0].length)}var i=P(n);switch(r){case me:return i;case we:return s([i],{type:t});case Se:return new Int8Array(i);case _e:return new Uint8Array(i);case Ae:return new Uint8ClampedArray(i);case Ee:return new Int16Array(i);case je:return new Uint16Array(i);case xe:return new Int32Array(i);case ke:return new Uint32Array(i);case Oe:return new Float32Array(i);case Ie:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}function $(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new fe(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(o){o.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,e()},function(e,t){r(t)})})});return n.serializer=Ne,o}function F(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new fe(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return f(r,t),r}function M(e,t){var n=this,r=new fe(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName,[],function(n,r){for(var i=r.rows,a=i.length,u=0;u<a;u++){var c=i.item(u),s=c.value;if(s&&(s=o.serializer.deserialize(s)),s=e(s,c.key,u+1),void 0!==s)return void t(s)}t()},function(e,t){r(t)})})}).catch(r)});return f(r,t),r}function U(e,t,n,r){var o=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new fe(function(i,a){o.ready().then(function(){void 0===t&&(t=null);var u=t,c=o._dbInfo;c.serializer.serialize(t,function(t,s){s?a(s):c.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){i(u)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(U.apply(o,[e,u,n,r-1]));a(t)}})})}).catch(a)});return f(i,n),i}function z(e,t,n){return U.apply(this,[e,t,n,1])}function q(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new fe(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return f(r,t),r}function V(e){var t=this,n=new fe(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return f(n,e),n}function K(e){var t=this,n=new fe(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return f(n,e),n}function H(e,t){var n=this,r=new fe(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return f(r,t),r}function W(e){var t=this,n=new fe(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})}).catch(n)});return f(n,e),n}function X(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=n.name+"/",n.storeName!==t._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),t._dbInfo=n,n.serializer=Ne,fe.resolve()}function Z(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return f(n,e),n}function Q(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return f(r,t),r}function J(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,u=0;u<i;u++){var c=localStorage.key(u);if(0===c.indexOf(r)){var s=localStorage.getItem(c);if(s&&(s=t.serializer.deserialize(s)),s=e(s,c.substring(o),a++),void 0!==s)return s}}});return f(r,t),r}function G(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return f(r,t),r}function Y(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++)0===localStorage.key(o).indexOf(e.keyPrefix)&&r.push(localStorage.key(o).substring(e.keyPrefix.length));return r});return f(n,e),n}function ee(e){var t=this,n=t.keys().then(function(e){return e.length});return f(n,e),n}function te(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return f(r,t),r}function ne(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new fe(function(o,i){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}})})});return f(o,n),o}function re(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function oe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ue(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}function ie(e){for(var t in Be)if(Be.hasOwnProperty(t)&&Be[t]===e)return!0;return!1}var ae="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":i(e)},ue=o();"undefined"==typeof Promise&&e(3);var ce,se,fe=Promise,le="local-forage-detect-blob-support",de=Object.prototype.toString,pe={_driver:"asyncStorage",_initStorage:x,iterate:k,getItem:j,setItem:O,removeItem:I,clear:R,length:D,key:N,keys:L},he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ve="~~local_forage_type~",ye=/^~~local_forage_type~([^~]+)~/,be="__lfsc__:",ge=be.length,me="arbf",we="blob",Se="si08",_e="ui08",Ae="uic8",Ee="si16",xe="si32",je="ur16",ke="ui32",Oe="fl32",Ie="fl64",Re=ge+me.length,De=Object.prototype.toString,Ne={serialize:B,deserialize:T,stringToBuffer:P,bufferToString:C},Le={_driver:"webSQLStorage",_initStorage:$,iterate:M,getItem:F,setItem:z,removeItem:q,clear:V,length:K,key:H,keys:W},Pe={_driver:"localStorageWrapper",_initStorage:X,iterate:J,getItem:Q,setItem:ne,removeItem:te,clear:Z,length:ee,key:G,keys:Y},Ce={},Be={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Te=[Be.INDEXEDDB,Be.WEBSQL,Be.LOCALSTORAGE],$e=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],Fe={description:"",driver:Te.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Me={};Me[Be.INDEXEDDB]=a(),Me[Be.WEBSQL]=u(),Me[Be.LOCALSTORAGE]=c();var Ue=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ze=function(){function e(t){r(this,e),this.INDEXEDDB=Be.INDEXEDDB,this.LOCALSTORAGE=Be.LOCALSTORAGE,this.WEBSQL=Be.WEBSQL,this._defaultConfig=oe({},Fe),this._config=oe({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===("undefined"==typeof e?"undefined":ae(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new fe(function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),i=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(o);if(ie(e._driver))return void n(i);for(var a=$e.concat("_initStorage"),u=0;u<a.length;u++){var c=a[u];if(!c||!e[c]||"function"!=typeof e[c])return void n(o)}var s=fe.resolve(!0);"_support"in e&&(s=e._support&&"function"==typeof e._support?e._support():fe.resolve(!!e._support)),s.then(function(n){Me[r]=n,Ce[r]=e,t()},n)}catch(e){n(e)}});return l(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=this,o=fe.resolve().then(function(){if(!ie(e)){if(Ce[e])return Ce[e];throw new Error("Driver not found.")}switch(e){case r.INDEXEDDB:return pe;case r.LOCALSTORAGE:return Pe;case r.WEBSQL:return Le}});return l(o,t,n),o},e.prototype.getSerializer=function(e){var t=fe.resolve(Ne);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){a._config.driver=a.driver()}function o(e){return a._extend(e),r(),a._ready=a._initStorage(a._config),a._ready}function i(e){return function(){function t(){for(;n<e.length;){var i=e[n];return n++,a._dbInfo=null,a._ready=null,a.getDriver(i).then(o).catch(t)}r();var u=new Error("No available storage method found.");return a._driverSet=fe.reject(u),a._driverSet}var n=0;return t()}}var a=this;Ue(e)||(e=[e]);var u=this._getSupportedDrivers(e),c=null!==this._driverSet?this._driverSet.catch(function(){return fe.resolve()}):fe.resolve();return this._driverSet=c.then(function(){var e=u[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then(function(e){a._driver=e._driver,r(),a._wrapLibraryMethodsWithReady(),a._initDriver=i(u)})}).catch(function(){r();var e=new Error("No available storage method found.");return a._driverSet=fe.reject(e),a._driverSet}),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Me[e]},e.prototype._extend=function(e){oe(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<$e.length;e++)re(this,$e[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),qe=new ze;t.exports=qe},{3:3}]},{},[4])(4)})}),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(){function e(){r(this,e)}return a(e,null,[{key:"set",value:function(){return i.setItem.apply(i,arguments)}},{key:"get",value:function(){return i.getItem.apply(i,arguments)}},{key:"remove",value:function(){return i.remove.apply(i,arguments)}},{key:"length",value:function(){return i.length.apply(i,arguments)}},{key:"clear",value:function(){return i.clear.apply(i,arguments)}},{key:"key",value:function(){return i.key.apply(i,arguments)}},{key:"keys",value:function(){return i.keys.apply(i,arguments)}},{key:"iterate",value:function(){return i.iterate.apply(i,arguments)}},{key:"setDriver",value:function(){return i.setDriver.apply(i,arguments)}},{key:"config",value:function(){return i.config.apply(i,arguments)}},{key:"defineDriver",value:function(){return i.defineDriver.apply(i,arguments)}},{key:"driver",value:function(){return i.setDriver.apply(i,arguments)}},{key:"supports",value:function(){return i.supports.apply(i,arguments)}}]),e}();return c})}),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(){n(this,e)}return d(e,null,[{key:"set",value:function(t){t.registerPlugin=e.registerPlugin,t.$http=c,t.$util=s,t.$cache=l,t.$cookie=f,t.$refs={}}},{key:"registerPlugin",value:function(e,t){Ballpen["$"+e]=t}}]),e}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function(){function e(t,n){var o=this;r(this,e),this.$dataModel=n,p.set(e),this.lifecycleHookPoint("beforeRender",this.$dataModel,function(){o.init(t,o.$dataModel),o.scan(o.$el)})}return h(e,[{key:"lifecycleHookPoint",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t.data;"beforeRender"===e&&t.lifecycle&&t.lifecycle.beforeRender?new Promise(function(e,r){return t.lifecycle.beforeRender.call(n,e,r,o)}).then(function(){r&&r.call(n,t)}).catch(function(e){}):"afterRender"===e&&t.lifecycle&&t.lifecycle.afterRender?t.lifecycle.afterRender.call(this,o):r&&r.call(this,t)}},{key:"init",value:function(e,t){
var n=this;if(this.$el=document.querySelector(e),this.$el||a.throwError('Find an invalid root element when initializing Ballpen.js -> "'+e+'"','Well, you should set a valid root element for Ballpen.js first constructor parameter, eg: "#app", "#container".'),t.events&&(this.$eventList={},this.initEventList(t.events)),t.data&&(this.$dataListPure=t.data,this.data=this.$dataListPure,this.$dataList=a.clone(t.data)),t.watchers){this.watchersHook=a.findReferenceNode(this.$dataList);var r=t.watchers,o=function(e){var t={root:e,handler:r[e].handler};n.watchersHook.forEach(function(n,r){new RegExp("^"+e,"ig").test(r)&&n.push(t)})};for(var i in r)o(i);this.watchersHook.forEach(function(e,t){a.renderObjectValueByPath(n.$dataList,t,n.setProxy(t,e))})}this.$registers=[]}},{key:"setProxy",value:function(e,t){var n=this,r=a.parseData(e,this.$dataList).data,o=a.parseData(e,this.$dataListPure).data,i={get:function(e,n){return t.forEach(function(e){e.handler,e.root}),e[n]},set:function(r,i,u,c){if(u!==o[i]){var s=void 0;a.isReferenceType(u)?(o[i]=a.clone(u),s=a.clone(u)):(o[i]=u,s=u),a.renderObjectValueByPath(n.$dataListPure,e+"."+i,s),r[i]=u,t.forEach(function(e){var t=e.handler,r=e.root;t&&t.call(n,a.parseData(r,n.$dataListPure).data,a.parseData(r,n.$dataList).data)})}return!0},defineProperty:function(e,t,n){return Reflect.defineProperty(e,t,n)}};return new Proxy(r,i)}},{key:"initEventList",value:function(e){if(e){var t=e;for(var n in t)this.$eventList[n]={},this.$eventList[n].type="",this.$eventList[n].fn=t[n]}}},{key:"scan",value:function(e){for(var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=function(n){var r=e.children[n];if(r.hasAttributes()){for(var o=r.attributes,i=[],a=0;a<o.length;a++){var u=o.item(a);i.push(u.name),/bp-event/gi.test(u.name)&&!function(){r.removeAttribute(u.name);var e=[],n=u;if(/bp-event:/gi.test(n.name))e.push({_fnType:n.name.split(":")[1],_fnName:n.value});else{var o=n.value.match(/[a-zA-Z]+:[a-zA-Z0-9_$]+/gi);o.forEach(function(t){e.push({_fnType:t.split(":")[0],_fnName:t.split(":")[1]})})}e.forEach(function(e){var n=e._fnType,o=e._fnName;t.bindEvent(r,o,n,t.$dataList,{})})}(),/bp-bind/gi.test(u.name)&&!function(){r.removeAttribute(u.name);var e=[],n=u;if(/bp-bind:/gi.test(n.name))e.push({_bindKey:n.name.split(":")[1],_thisSubModelAbs:n.value});else{var o=n.value.match(/[a-zA-Z0-9_$-]+:[a-zA-Z0-9_$.]+/gi);o.forEach(function(t){e.push({_bindKey:t.split(":")[0],_thisSubModelAbs:t.split(":")[1]})})}e.forEach(function(e){var n=e._bindKey,o=e._thisSubModelAbs;t.bindBind(r,o,n)})}()}if(i.includes("bp-pre"))return t.bindPre(r),"continue";if(i.includes("bp-for"))return t.bindFor(r),"continue";i.includes("bp-model")&&t.bindModel(r),i.includes("bp-class")&&t.bindClass(r),i.includes("bp-show")&&t.bindShow(r),i.includes("bp-ref")&&t.bindRef(r)}var c=r.childNodes;c.forEach(function(e,n){e.nodeType===Node.TEXT_NODE&&t.bindMoustache(r,e)}),r.children.length>0&&t.scan(r,!1)},o=0;o<e.children.length;o++){r(o)}n&&(this.attach(),this.$el.removeAttribute("bp-shade"),this.lifecycleHookPoint("afterRender",this.$dataModel))}},{key:"bindRef",value:function(t){var n=t.getAttribute("bp-ref");a.isArray(e.$refs[n])?e.$refs[n].push(t):(e.$refs[n]=[],e.$refs[n].push(t)),t.removeAttribute("bp-ref")}},{key:"bindShow",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=a.wrapAbsPath(n,e.getAttribute("bp-show"));a.ignoreInnerDirectives(r,[],function(e){var n=a.parseData(r,t.$dataList),o=e.style;n.data?o.removeProperty?o.removeProperty("display"):o.removeAttribute("display"):o.display="none",t.register(t.$dataList,t.$dataListPure,n.path,function(e,t){t?o.removeProperty?o.removeProperty("display"):o.removeAttribute("display"):o.display="none"})},e),e.removeAttribute("bp-show")}},{key:"bindModel",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=a.wrapAbsPath(n,e.getAttribute("bp-model"));a.ignoreInnerDirectives(r,[/^@{([\d]+)}$/gi],function(e){if(/^@{([\d]+)}$/gi.test(r)){var n=r.match(/^@{([\d]+)}$/)[1];"INPUT"===e.tagName?e.value=n:e.innerText=n}else{var o=a.parseData(r,t.$dataList);"INPUT"===e.tagName?e.value=o.data:e.innerText=o.data,t.register(t.$dataList,t.$dataListPure,o.path,function(t,n){"INPUT"===e.tagName?e.value=n:e.innerText=n})}},e),e.removeAttribute("bp-model")}},{key:"bindMoustache",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=t.nodeValue,i=t.nodeValue,u=i.match(/{{.*?}}/gi),c={};if(a.isArray(u)&&u.length>0){u.forEach(function(e){var u=e.slice(2,-2).trim();/^@{([\d]+)}$/gi.test(u)?c[e]=u.match(/^@{([\d]+)}$/)[1]:!function(){var s=a.parseData(a.wrapAbsPath(r,u),n.$dataList);c[e]=s.data,n.register(n.$dataList,n.$dataListPure,s.path,function(e,n){c["{{ "+s.path.join(".")+" }}"]=n;for(var r in c)i=o.replace(r,c[r]);t.nodeValue=i})}()});for(var s in c)i=o.replace(s,c[s])}t.nodeValue=i}},{key:"bindClass",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=a.wrapAbsPath(n,e.getAttribute("bp-class"));a.ignoreInnerDirectives(r,[],function(e){var n=a.parseData(r,t.$dataList);e.classList.contains(n.data)||e.classList.add(n.data),t.register(t.$dataList,t.$dataListPure,n.path,function(t,n){e.classList.remove(t),e.classList.contains(n)||e.classList.add(n)})},e),e.removeAttribute("bp-class")}},{key:"bindPre",value:function(e){e.removeAttribute("bp-pre")}},{key:"bindEvent",value:function(e,t,n,r){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};a.ignoreInnerDirectives(t,[],function(e,t,n,r){o.$eventList[t].type=n,e.addEventListener(n,function(){o.$eventList[t].fn.call(o.$dataList,e,r,i)})},e,t,n,r,i)}},{key:"bindBind",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];a.ignoreInnerDirectives(t,[],function(e,t,n){var i=a.wrapAbsPath(o,t),u=a.parseData(i,r.$dataList);e.setAttribute(n,u.data),r.register(r.$dataList,r.$dataListPure,u.path,function(t,r){e.setAttribute(n,r)})},e,t,n)}},{key:"bindFor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.getAttribute("bp-for").split(/\s+in\s+/),i=o[1],u=o[0],c=a.randomSequence(12);if(/^@/gi.test(u)||a.throwError('Invalid alias name when initializing a "bp-for" condition -> "'+u+'".','Please make sure the alias name is start with a "@" symbol.'),/\./gi.test(i)){var s=i.split(".");n[i]=n[s[0]]+"."+s[1]}else n[i]=i;for(var f=a.clone(n),l=a.clone(r),d=a.parseData(n[i],this.$dataList),p=e.parentNode,h=document.createDocumentFragment(),v=0;v<d.data.length;v++){var y=e.cloneNode(!0),b=n[i]+"."+v;n[u]=b,r[u]=v,y.removeAttribute("bp-for"),y.setAttribute("bp-for-rendered-id",c),this.bindForItemsRecursion(y,n,r,b,v,!0,function(e){h.appendChild(e)})}p.replaceChild(h,e),this.register(this.$dataList,this.$dataListPure,d.path,function(n,r){for(var o=document.createDocumentFragment(),a=0;a<r.length;a++){var s=e.cloneNode(!0),d=f[i]+"."+a;f[u]=d,l[u]=a,s.removeAttribute("bp-for"),s.setAttribute("bp-for-rendered-id",c),t.bindForItemsRecursion(s,f,l,d,a,!0,function(e){o.appendChild(e)})}for(var h=p.querySelectorAll("[bp-for-rendered-id='"+c+"']"),v=0;v<h.length;v++)0===v?p.replaceChild(o,h.item(v)):h.item(v).remove()})}},{key:"bindForItemsRecursion",value:function(e,t,n,r,o){for(var i=this,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=!!a.isHTMLCollection(e),f=function(u){var c=s?e[u]:e,f=c.childNodes;if(f.forEach(function(e,r){e.nodeType===Node.TEXT_NODE&&!function(){var r=e.nodeValue,o=e.nodeValue,u=o.match(/{{.*?}}/gi),s={};if(a.isArray(u)&&u.length>0){u.forEach(function(e){var r=e.slice(2,-2).trim(),o=r;/^@/gi.test(r)&&(o=/\[\[index\]\]/gi.test(r)?"@{"+n[r.match(/^(.*)\[\[index\]\]$/)[1]]+"}":r.replace(/^@[a-z0-9A-Z_]*/,t[r.split(".")[0]])),s[e]="{{ "+o+" }}"});for(var f in s)o=r.replace(f,s[f])}e.nodeValue=o,i.bindMoustache(c,e)}()}),!c.hasAttributes()&&s)return c.children.length>0&&i.bindForItemsRecursion(c.children,t,n,r,o),"continue";for(var l=c.attributes,d=[],p=0;p<l.length;p++){var h=l.item(p);d.push(h.name),/bp-event/gi.test(h.name)&&!function(){var e=[];if(/bp-event:/gi.test(h.name))e.push({_fnType:h.name.split(":")[1],_fnName:h.value});else{var t=h.value.match(/[a-zA-Z]+:[a-zA-Z0-9_$]+/gi);t.forEach(function(t){e.push({_fnType:t.split(":")[0],_fnName:t.split(":")[1]})})}e.forEach(function(e){var t=e._fnType,n=e._fnName;/^@:/gi.test(n)?i.bindEvent(c,n.split(":")[1],t,i.$dataList,{index:o}):i.bindEvent(c,n,t,i.$dataList,{})})}(),/bp-bind/gi.test(h.name)&&!function(){var e=[];if(/bp-bind:/gi.test(h.name))e.push({_bindKey:h.name.split(":")[1],_thisSubModelAbs:h.value});else{var n=h.value.match(/[a-zA-Z0-9_$-]+:[a-zA-Z0-9_$.]+/gi);n.forEach(function(t){e.push({_bindKey:t.split(":")[0],_thisSubModelAbs:t.split(":")[1]})})}e.forEach(function(e){var n=e._bindKey,r=e._thisSubModelAbs;/^@/gi.test(r)&&(r=r.replace(/^@[a-z0-9A-Z_]*/,t[r.split(".")[0]])),i.bindBind(c,r,n)})}()}if(d.includes("bp-for"))return i.bindFor(c,t,n),"continue";if(d.includes("bp-ref")&&i.bindRef(c),d.includes("bp-class")){var v=c.getAttribute("bp-class"),y=v;/^@/gi.test(v)&&(y=v.replace(/^@[a-z0-9A-Z_]*/,t[v.split(".")[0]])),y!==v&&c.setAttribute("bp-class",y),i.bindClass(c)}if(d.includes("bp-model")){var b=c.getAttribute("bp-model"),g=b;/^@/gi.test(b)&&(g=/\[\[index\]\]/gi.test(b)?"@{"+n[b.match(/^(.*)\[\[index\]\]$/)[1]]+"}":/@{\d+}/gi.test(b)?b:b.replace(/^@[a-z0-9A-Z_]*/,t[b.split(".")[0]])),g!==b&&c.setAttribute("bp-model",g),i.bindModel(c)}if(d.includes("bp-show")){var m=c.getAttribute("bp-show"),w=m;/^@/gi.test(m)&&(w=m.replace(/^@[a-z0-9A-Z_]*/,t[m.split(".")[0]])),w!==m&&c.setAttribute("bp-show",w),i.bindShow(c)}c.children.length>0&&i.bindForItemsRecursion(c.children,t,n,r,o)},l=0;l<(s?e.length:1);l++){f(l)}u&&c&&c.call(this,e)}},{key:"observePath",value:function(e,t,n,r){var o=this;a.isArray(n)&&!function(){var i=e,a=void 0;n.forEach(function(e,t){/^\d+$/.test(e)&&(e=parseInt(e)),t<n.length-1?i=i[e]:a=e}),t=n.join("."),o.observeKey(i,t,a,r)}()}},{key:"observeKey",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a.isArray(n)?this.observePath(e,t,n,o):!function(){var i=e[n],u=t;a.isObject(i)?(Object.defineProperty(e,n,{get:function(){return i},set:function(e){e!==i&&(o&&o.forEach(function(t){t.call(r,i,e)}),i=e,a.renderObjectValueByPath(r.$dataListPure,u,e))},enumerable:!0,configurable:!0}),Object.keys(i).forEach(function(e){r.observeKey(i,u+"."+e,e,o)})):a.isArray(i)?(Object.defineProperty(e,n,{get:function(){return i},set:function(e){e!==i&&(o&&o.forEach(function(t){t.call(r,i,e)}),i=e,a.renderObjectValueByPath(r.$dataListPure,u,e))},enumerable:!0,configurable:!0}),r.observeArray(i,u,o)):Object.defineProperty(e,n,{get:function(){return i},set:function(e){e!==i&&(o&&o.forEach(function(t){t.call(r,i,e)}),i=e,a.renderObjectValueByPath(r.$dataListPure,u,e))},enumerable:!0,configurable:!0})}()}},{key:"observeArray",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"],i=Array.prototype,u=Object.create(i),c=t;o.forEach(function(t){Object.defineProperty(u,t,{enumerable:!0,configurable:!0,writable:!0,value:function(){for(var o,u=arguments.length,s=Array(u),f=0;f<u;f++)s[f]=arguments[f];var l=e.slice(),d=(o=i[t]).call.apply(o,[e].concat(s)),p=e;return a.renderObjectValueByPath(n.$dataListPure,c,p),r&&r.forEach(function(e){e.call(n,l,p)}),d}})}),e.__proto__=u}},{key:"register",value:function e(t,n,r,o){var e=this.$registers.find(function(e){if(Object.is(e.obj,t)&&(e.key===r||e.key.toString()===r.toString()))return e});e?e.fns.push(o):this.$registers.push({obj:t,rootPath:[],key:r,fns:[o]})}},{key:"attach",value:function(){var e=this;this.$registers.forEach(function(t){e.observeKey(t.obj,t.rootPath,t.key,t.fns)})}}]),e}();return v});
//# sourceMappingURL=ballpen.min.js.map
